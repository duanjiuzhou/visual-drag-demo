(this["webpackJsonpvisual-drag-demo"]=this["webpackJsonpvisual-drag-demo"]||[]).push([[11],{673:function(e,n,t){},674:function(e,n,t){},675:function(e,n,t){},722:function(e,n,t){"use strict";function c(e){var n=(a=Object(v.d)()).addComponent,t=a.componentsMeta,c=a.componentsInstance,a=Object(r.useCallback)((function(){var a=e.name,o=e.showName,s=e.closeFunc,i=e.version,r={},l=(b=t[a]).uiSchema,d=b.dataSchema;!function e(n){var t,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";for(t in n){var a,o=n[t];"group"===o.type?e(o.children,(a=o.baseParam)?"".concat(a):""):r[c+t]=o.defaultValue}}(l);var p=[c[0].box.width/2,c[0].box.height/2],b=(l=(b=[r.width||150,r.height||150])[0],b[1]);s(),n({id:"",type:a,name:o,version:i,box:{width:l,height:b,top:p[1]-b/2,left:p[0]-l/2,zIndex:1,rotate:0,opacity:1},props:Object(g.a)({},Object(k.d)(r)),dataSource:d||{}})}),[e,t,c,n]);return Object(w.jsx)("div",{className:"component-item",onClick:a,children:e.showName})}function a(e){var n=e.subList,t=e.components,a=Object(r.useState)(n?[n[0].key]:[]),o=(l=Object(f.a)(a,2))[0],s=l[1],i=(a=Object(r.useState)([]),a=(l=Object(f.a)(a,2))[0],l[1]),l=Object(r.useCallback)((function(n){return 0<n.length?Object(w.jsx)("div",{className:"component-list",children:n.map((function(n){return Object(w.jsx)(c,Object(g.a)(Object(g.a)({},n),{},{closeFunc:e.closeFunc}),n.name)}))}):Object(w.jsx)(O.a,{style:{paddingTop:"12px"}})}),[e.closeFunc]);return Object(r.useEffect)((function(){var e;n&&(e=n.find((function(e){return e.key===o[0]})),i(e?e.components:[]))}),[o,n]),Object(w.jsx)(C,{children:n?Object(w.jsxs)("div",{className:"content-wrap",children:[Object(w.jsx)("div",{className:"menu-wrap",children:Object(w.jsx)(x.a,{selectedKeys:o,onSelect:function(e){return s([e.key])},children:n.map((function(e){return Object(w.jsx)(x.a.Item,{children:e.name},e.key)}))})}),Object(w.jsx)("div",{className:"component-wrap",children:l(a)})]}):l(t)})}function o(){var e=Object(v.d)().componentsMeta,n=Object(r.useState)(),t=Object(f.a)(n,2),c=t[0],o=t[1],s=(n=Object(r.useState)(),n=(t=Object(f.a)(n,2))[0],t[1]),i=Object(r.useCallback)((function(){o(void 0)}),[]);return Object(r.useEffect)((function(){var n,t,c;n=Object.keys(e).map((function(n){return e[n]})),t=Object(h.a)(y),c={},t.forEach((function(e,n){e.key?c[e.key]="".concat(n):e.subList&&e.subList.forEach((function(e,t){c[e.key]="".concat(n,".").concat(t)}))})),n.forEach((function(e){e.classify&&e.classify.forEach((function(n){0!==(n=c[n]?c[n].split("."):[]).length&&(1===n.length?t[Number(n[0])].components.push(e):2===n.length&&t[Number(n[0])].subList[Number(n[1])].components.push(e))}))})),s(t)}),[e]),Object(w.jsx)(N,{children:n?n.map((function(e){return Object(w.jsx)(j.a,{visible:c===e.name,onVisibleChange:function(n){o(e.name),n||o(void 0)},trigger:["click"],overlay:Object(w.jsx)(a,Object(g.a)(Object(g.a)({},e),{},{closeFunc:i})),children:Object(w.jsx)("div",{className:"category ".concat(e.name===c?"selected":""),children:e.name})},e.name)})):null})}function s(){var e=(s=Object(v.d)()).componentsInstance,n=s.clearCanvas,t=Object(p.d)(),c=Object(r.useCallback)((function(){localStorage.setItem("designerData",JSON.stringify(e)),d.a.success("\u4fdd\u5b58\u6210\u529f")}),[e]),a=Object(r.useCallback)((function(){n(),d.a.success("\u5220\u9664\u6210\u529f")}),[n]),s=Object(r.useCallback)((function(){localStorage.setItem("designerData",JSON.stringify(e)),t.push(S.b)}),[e,t]);return Object(w.jsxs)("div",{className:"wrap",children:[Object(w.jsx)("div",{className:"component-warp",children:Object(w.jsx)(o,{})}),Object(w.jsxs)("div",{className:"handle-wrap",children:[Object(w.jsx)("span",{onClick:a,className:"release-wrap",title:"\u6e05\u7a7a\u753b\u5e03",children:Object(w.jsx)(b.a,{className:"icon icon-align"})}),Object(w.jsx)("span",{onClick:c,className:"release-wrap",title:"\u4fdd\u5b58",children:Object(w.jsx)(u.a,{className:"icon icon-align"})}),Object(w.jsx)("span",{onClick:s,className:"release-wrap",title:"\u53d1\u5e03\u9884\u89c8",children:Object(w.jsx)(m.a,{className:"icon release"})})]})]})}function i(){var e=Object(v.d)(),n=e.componentsInstance,t=e.activeComponent,c=e.setActiveComponentIndex;return Object(w.jsxs)(I,{children:[Object(w.jsx)("div",{className:"label",children:"\u56fe\u5c42"}),Object(w.jsx)("ul",{className:"layer-list",children:n.map((function(e,n){var a=e.id;e=e.name;return Object(w.jsx)("li",{className:"com-item ".concat((null==t?void 0:t.id)===a?"com-checked":null),onClick:function(){c(n)},children:e},a)}))})]})}t.r(n);var r=t(0),l=(t(422),t(190)),d=t.n(l),p=t(45),b=t(723),u=t(724),m=t(725),j=(l=(t(424),t(671)),t.n(l)),h=t(392),x=(l=(t(427),t(660)),t.n(l)),O=(l=(t(252),t(272)),t.n(l)),f=t(91),g=t(63),v=t(119),y=(l=t(92),[{name:"\u56fe\u8868",icon:"",subList:[{name:"\u67f1\u72b6\u56fe",icon:"",key:"bar-chart",components:[]},{name:"\u6298\u7ebf\u56fe",icon:"",key:"line-chart",components:[]},{name:"\u997c\u56fe",icon:"",key:"pie-chart",components:[]},{name:"\u6563\u70b9\u56fe",icon:"",key:"scatter-chart",components:[]},{name:"\u5176\u4ed6",icon:"",key:"other-chart",components:[]}],components:[]},{name:"\u5a92\u4f53",key:"media",icon:"",components:[]},{name:"\u6587\u5b57",key:"text",icon:"",components:[]},{name:"\u8f85\u52a9",key:"interactive",icon:"",components:[]}]),k=t(181),w=t(2),N=l.a.div.withConfig({displayName:"component-list__ComponentListWrap",componentId:"sc-190ecry-0"})(["display:flex;color:white;box-shadow:rgba(43,146,210,0.1) 0px 2px 4px 0px;align-items:center;.category{display:flex;align-items:center;justify-content:center;height:40px;padding:0 12px;cursor:pointer;&:hover{background-color:rgba(8,14,33,0.5);}&.selected{color:rgba(21,139,246,1);background-color:rgba(8,14,33,0.3);}}"]),C=l.a.div.withConfig({displayName:"component-list__OverlayWrap",componentId:"sc-190ecry-1"})(["width:300px;height:160px;background-color:#000;color:#fff;.component-list{display:grid;grid-row-gap:8px;grid-column-gap:8px;grid-template-columns:repeat(5,1fr);padding:8px;}.component-item{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border:1px solid rgba(35,198,254,1);cursor:pointer;&:hover{background:rgba(255,255,255,0.4);}}.content-wrap{display:flex;}.menu-wrap{flex:none;width:80px;}.component-wrap{flex:auto;overflow:auto;}"]),S=t(8),I=(t(673),l.a.div.withConfig({displayName:"layer-list__ComponentListWrap",componentId:"g97dyu-0"})(["position:relative;width:200px;height:100%;color:#fff;background-color:#202327;.label{height:40px;padding:0 16px;line-height:40px;text-align:center;background:#373a44;}.layer-list{flex:1;height:calc(100% - 40px);padding:0;overflow-y:auto;transition:all linear 0.2s;.com-item{position:relative;display:flex;align-items:center;height:30px;padding:0 8px;list-style:none;outline:none;cursor:pointer;&:hover{color:#fff;}}.com-checked{background:rgb(36,145,247);}&::-webkit-scrollbar{width:5px;height:5px;}&::-webkit-scrollbar-thumb{background:rgba(144,146,152,0.46);border-radius:5px;}&::-webkit-scrollbar-track{background:transparent;border-radius:5px;}}"]));function F(){var e=(c=Object(v.d)()).scale,n=c.updateScale,t=Object(r.useCallback)((function(){n(+(e+.1).toFixed(1))}),[e,n]),c=Object(r.useCallback)((function(){n(+(e-.1).toFixed(1))}),[e,n]);return Object(w.jsxs)("div",{className:"slider",children:[Object(w.jsx)("span",{className:"slider-btn",onClick:t,children:"+"}),Object(w.jsxs)("span",{className:"slider-number",children:[(100*e).toFixed(0),"%"]}),Object(w.jsx)("span",{className:"slider-btn",onClick:c,children:"-"})]})}t(674);var L=t(312);t(675),n.default=function(){var e=Object(r.useMemo)((function(){var e=localStorage.getItem("designerData");return e?JSON.parse(e):[]}),[]);return Object(w.jsx)("div",{className:"layout-wrap",children:Object(w.jsxs)(v.c,{mode:"edit",componentsMeta:L.a,componentsInstance:e,children:[Object(w.jsx)(s,{}),Object(w.jsxs)("div",{className:"layout-content",children:[Object(w.jsx)(i,{}),Object(w.jsx)("div",{className:"canvas-wrap",children:Object(w.jsx)("div",{className:"canvas-content grid-wrap",children:Object(w.jsx)(v.a,{})})}),Object(w.jsx)(v.b,{})]}),Object(w.jsx)(F,{})]})})}}}]);