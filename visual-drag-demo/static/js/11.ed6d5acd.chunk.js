(this["webpackJsonpvisual-drag-demo"]=this["webpackJsonpvisual-drag-demo"]||[]).push([[11],{113:function(e,t,n){"use strict";n.d(t,"c",(function(){return ve})),n.d(t,"d",(function(){return D})),n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return Oe}));var a=n(57),c=n(134),o=n(78),i=n(0);function r(e){return(e+360)%360}function l(e,t,n){return{x:(e.x-t.x)*Math.cos(u(n))-(e.y-t.y)*Math.sin(u(n))+t.x,y:(e.x-t.x)*Math.sin(u(n))+(e.y-t.y)*Math.cos(u(n))+t.y}}function s(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}function u(e){return e*Math.PI/180}var d={lt:function(e,t,n,a,c){var o=c.symmetricPoint,i=s(t,o),r=l(t,i,-e.rotate),u=l(o,i,-e.rotate);c=u.x-r.x,t=u.y-r.y;a&&(n<c/t?(r.x+=Math.abs(c-t*n),c=t*n):(r.y+=Math.abs(t-c/n),t=c/n),n=l(r,i,e.rotate),r=l(n,i=s(n,o),-e.rotate),c=(u=l(o,i,-e.rotate)).x-r.x,t=u.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(r.x),e.top=Math.round(r.y))},t:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:i.x,y:c.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.width,a&&(t=c*n),e.width=t,e.height=Math.round(c),e.top=Math.round(o-c/2),e.left=Math.round(i-e.width/2))},rt:function(e,t,n,a,c){var o=c.symmetricPoint,i=s(t,o),r=l(t,i,-e.rotate),u=l(o,i,-e.rotate);c=r.x-u.x,t=u.y-r.y;a&&(n<c/t?(r.x-=Math.abs(c-t*n),c=t*n):(r.y+=Math.abs(t-c/n),t=c/n),n=l(r,i,e.rotate),r=l(n,i=s(n,o),-e.rotate),u=l(o,i,-e.rotate),c=r.x-u.x,t=u.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(u.x),e.top=Math.round(r.y))},r:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:c.x,y:i.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.height,a&&(t=c/n),e.height=t,e.width=Math.round(c),e.top=Math.round(o-e.height/2),e.left=Math.round(i-c/2))},rb:function(e,t,n,a,c){var o=c.symmetricPoint,i=s(t,o),r=l(o,i,-e.rotate),u=l(t,i,-e.rotate);c=u.x-r.x,t=u.y-r.y;a&&(n<c/t?(u.x-=Math.abs(c-t*n),c=t*n):(u.y-=Math.abs(t-c/n),t=c/n),n=l(u,i,e.rotate),r=l(o,i=s(n,o),-e.rotate),c=(u=l(n,i,-e.rotate)).x-r.x,t=u.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(r.x),e.top=Math.round(r.y))},b:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:i.x,y:c.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.width,a&&(t=c*n),e.width=t,e.height=Math.round(c),e.top=Math.round(o-c/2),e.left=Math.round(i-e.width/2))},lb:function(e,t,n,a,c){var o=c.symmetricPoint,i=s(t,o),r=l(o,i,-e.rotate),u=l(t,i,-e.rotate);c=r.x-u.x,t=u.y-r.y;a&&(n<c/t?(u.x+=Math.abs(c-t*n),c=t*n):(u.y-=Math.abs(t-c/n),t=c/n),n=l(u,i,e.rotate),r=l(o,i=s(n,o),-e.rotate),u=l(n,i,-e.rotate),c=r.x-u.x,t=u.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(u.x),e.top=Math.round(r.y))},l:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:c.x,y:i.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.height,a&&(t=c/n),e.height=t,e.width=Math.round(c),e.top=Math.round(o-e.height/2),e.left=Math.round(i-c/2))}};n(224);var h=n(2),b=["lt","t","rt","r","rb","b","lb","l"],p={lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},j=[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],f="drag-shape-point";function m(e){var t=e.children,n=e.shapeStyle,c=e.isActive,l=e.container,s=void 0===(I=e.scale)?{x:1,y:1}:I,u=e.onDrag,m=e.onDragStart,x=e.onDragEnd,O=e.onCLick,v=Object(i.useState)({width:n.width,height:n.height}),y=(I=Object(o.a)(v,2))[0],g=I[1],w=(e=Object(i.useState)({}),(v=Object(o.a)(e,2))[0]),C=v[1],k=Object(i.useRef)(null),M=Object(i.useCallback)((function(e){var t=y.width,n=y.height,a=/t/.test(e),c=/b/.test(e),o=/l/.test(e),i=/r/.test(e),r=0,l=0;return 2===e.length?(r=o?0:t,l=a?0:n):((a||c)&&(r=t/2,l=a?0:n),(o||i)&&(r=o?0:t,l=Math.floor(n/2))),{marginLeft:"-4px",marginTop:"-4px",left:"".concat(r,"px"),top:"".concat(l,"px"),cursor:w[e]}}),[y,w]),N=Object(i.useCallback)((function(){var e=r(n.rotate),t={},a=-1;return b.forEach((function(n){for(var c=r(p[n]+e),o=j.length;;){var i=j[a=(a+1)%o];if(c<23||338<=c)return void(t[n]="nw-resize");if(i.start<=c&&c<i.end)return void(t[n]="".concat(i.cursor,"-resize"))}})),t}),[n.rotate]),S=Object(i.useCallback)((function(e,t){var c;m&&m(n),t.stopPropagation(),t.preventDefault();var o=Object(a.a)({},n),i=s.x,r=s.y,h=o.width/o.height,b={x:o.left+o.width/2,y:o.top+o.height/2},p=null===(c=document.querySelector(l))||void 0===c?void 0:c.getBoundingClientRect();if(!p)throw new Error("container\u5c5e\u6027\u4e3a\u7a7a\uff0c\u6216\u8005\u83b7\u53d6\u753b\u5e03dom\u5931\u8d25");function j(t){var n,c,l,s;v?v=!1:(s={x:(t.clientX-p.left)/i,y:(t.clientY-p.top)/r},n=o,c=s,l=h,t=!1,s={center:b,curPoint:f,symmetricPoint:O},d[e](n,c,l,t,s),k.current&&((s=k.current.style).top="".concat(o.top,"px"),s.left="".concat(o.left,"px"),s.width="".concat(o.width,"px"),s.height="".concat(o.height,"px")),g({width:o.width,height:o.height}),u&&u(Object(a.a)({},o),"point"))}var f={x:(t.clientX-p.left)/i,y:(t.clientY-p.top)/r},O={x:b.x-(f.x-b.x),y:b.y-(f.y-b.y)},v=!0;t=function e(){x&&x(o),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",t)}),[m,n,s,l,u,x]),I=Object(i.useCallback)((function(e){function t(e){var t=e.clientX;e=e.clientY,t=Math.atan2(e-s,t-l)/(Math.PI/180);c.rotate=Math.round(r+t-d),k.current&&(k.current.style.transform="rotate(".concat(c.rotate,"deg)")),u&&u(Object(a.a)({},c),"rotate")}m&&m(n),e.stopPropagation(),e.preventDefault();var c=Object(a.a)({},n),o=e.clientY,i=e.clientX,r=c.rotate,l=(e=k.current.getBoundingClientRect()).left+e.width/2,s=e.top+e.height/2,d=Math.atan2(o-s,i-l)/(Math.PI/180);i=function e(){x&&x(c),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}),[n,u,x,m]);e=Object(i.useCallback)((function(e){var t,c,o,i,r,l,d,h,b;e.target.dataset.index!==f&&(m&&m(n),e.stopPropagation(),t=Object(a.a)({},n),c=e.clientY,o=e.clientX,i=Number(t.top),r=Number(t.left),l=s.x,d=s.y,h=function(n){var s=n.clientX,h=n.clientY;t.top=(h-c)/d+i,t.left=(s-o)/l+r,(n=e.target.style).top="".concat(t.top,"px"),n.left="".concat(t.left,"px"),u&&u(Object(a.a)({},t),"shape",0<h-c,0<s-o)},b=function e(){x&&x(t),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",e)},document.addEventListener("mousemove",h),document.addEventListener("mouseup",b))}),[m,n,s,u,x]),v=Object(i.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),O&&O()}),[O]);return Object(i.useEffect)((function(){g({width:n.width,height:n.height})}),[n.height,n.width]),Object(i.useEffect)((function(){c&&C(N())}),[c,N]),Object(h.jsxs)("div",{className:"drag-shape-wrap",onMouseDown:e,onClick:v,ref:k,style:{top:n.top,left:n.left,width:n.width,height:n.height,zIndex:n.zIndex,transform:"rotate(".concat(n.rotate,"deg)"),outline:c?"1px solid #70c0ff":"none"},children:[c&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:Object(h.jsxs)("svg",{onMouseDown:I,"data-index":f,className:"drag-shape-rotate",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3070",children:[Object(h.jsx)("path",{d:"M512 957.671444c-237.936053 0-431.558986-193.622933-431.558986-431.558985S274.063947 94.553473 512 94.553473c86.368247 0 169.914002 25.402426 241.323043 73.667034 14.112459 9.596472 18.063947 28.789416 8.467475 43.184124-9.596472 14.112459-28.789416 18.063947-43.184123 8.467475-60.965821-41.208379-132.657111-63.223815-206.606395-63.223815-203.783903 0-369.464168 165.680265-369.464168 369.464168s165.680265 369.464168 369.464168 369.464167c98.787211 0 191.364939-38.385888 261.362734-108.101433s108.101433-162.575524 108.101434-261.362734c0-17.2172 13.830209-31.047409 31.047409-31.047409s31.047409 13.830209 31.047409 31.047409c0 115.157663-44.877619 223.541345-126.44763 305.111356s-189.953693 126.44763-305.111356 126.447629z","p-id":"3071"}),Object(h.jsx)("path",{d:"M822.191841 257.693495c-16.652701 8.185226-36.974642 1.411246-45.442117-15.241455l-77.054024-154.108049c-8.185226-16.652701-1.411246-36.974642 15.241455-45.442117 16.652701-8.185226 36.974642-1.411246 45.442117 15.241456l77.054025 154.108048c8.185226 16.652701 1.411246 36.974642-15.241456 45.442117z","p-id":"3072"}),Object(h.jsx)("path",{d:"M622.641676 319.506064c-8.185226-16.652701-1.411246-36.974642 15.241455-45.442117l154.108049-77.054024c16.652701-8.185226 36.974642-1.411246 45.442117 15.241455 8.185226 16.652701 1.411246 36.974642-15.241456 45.442117l-154.108048 77.054024c-16.93495 8.185226-37.256891 1.411246-45.442117-15.241455z","p-id":"3073"})]})}),b.map((function(e){return Object(h.jsx)("div",{className:"drag-shape-point",style:M(e),"data-index":f,onMouseDown:S.bind(null,e)},e)}))]}),t]})}function x(e){return e*Math.PI/180}function O(e){return Math.abs(Math.cos(x(e)))}function v(e){return Math.abs(Math.sin(x(e)))}function y(e){var t,n,c=Object(a.a)({},e);return 0!==c.rotate?(t=c.width*O(c.rotate)+c.height*v(c.rotate),n=(c.width-t)/2,c.left+=n,c.right=c.left+t,n=((e=c.height*O(c.rotate)+c.width*v(c.rotate))-c.height)/2,c.top-=n,c.bottom=c.top+e,c.width=t,c.height=e):(c.bottom=c.top+c.height,c.right=c.left+c.width),c}n(225);var g=["xt","xc","xb","yl","yc","yr"],w={xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1},C=Object(i.memo)((function(e){var t=e.diff,n=void 0===t?3:t,c=e.isShow,r=e.isDownward,l=e.isRightward,s=e.allComponentStyleList,u=e.activeComponentIndex,d=e.curComponentStyle,b=e.getShapeOffset,p=Object(i.useRef)({}),j=(e=Object(i.useState)(w),(e=Object(o.a)(e,2))[0]),f=e[1],m=Object(i.useCallback)((function(e,t){return Math.abs(e-t)<=n}),[n]),x=Object(i.useCallback)((function(e,t,n){var a=d.width,c=d.height;return"top"===e?Math.round(t.dragShift-(c-n.height)/2):Math.round(t.dragShift-(a-n.width)/2)}),[d]),O=Object(i.useCallback)((function(e){var t=Object(a.a)({},j);l?e.includes("yr")?t.yr=!0:e.includes("yc")?t.yc=!0:e.includes("yl")&&(t.yl=!0):e.includes("yl")?t.yl=!0:e.includes("yc")?t.yc=!0:e.includes("yr")&&(t.yr=!0),r?e.includes("xb")?t.xb=!0:e.includes("xc")?t.xc=!0:e.includes("xt")&&(t.xt=!0):e.includes("xt")?t.xt=!0:e.includes("xc")?t.xc=!0:e.includes("xb")&&(t.xb=!0),f(t)}),[r,l,j]),v=Object(i.useCallback)((function(){f(w)}),[]),C=Object(i.useCallback)((function(){var e=y(d),t=Math.round(e.width/2),n=Math.round(e.height/2);v(),s.forEach((function(a,c){var o,i,r,l,s,h,j,f;u!==c&&(i=(o=y(a)).top,r=o.left,l=o.bottom,s=o.right,c=Math.round(o.width/2),a=Math.round(o.height/2),h={top:[{isNearly:m(e.top,i),lineNode:p.current.xt,line:"xt",dragShift:i,lineShift:i},{isNearly:m(e.bottom,i),lineNode:p.current.xt,line:"xt",dragShift:i-e.height,lineShift:i},{isNearly:m(e.top+n,i+a),lineNode:p.current.xc,line:"xc",dragShift:i+a-n,lineShift:i+a},{isNearly:m(e.top,l),lineNode:p.current.xb,line:"xb",dragShift:l,lineShift:l},{isNearly:m(e.bottom,l),lineNode:p.current.xb,line:"xb",dragShift:l-e.height,lineShift:l}],left:[{isNearly:m(e.left,r),lineNode:p.current.yl,line:"yl",dragShift:r,lineShift:r},{isNearly:m(e.right,r),lineNode:p.current.yl,line:"yl",dragShift:r-e.width,lineShift:r},{isNearly:m(e.left+t,r+c),lineNode:p.current.yc,line:"yc",dragShift:r+c-t,lineShift:r+c},{isNearly:m(e.left,s),lineNode:p.current.yr,line:"yr",dragShift:s,lineShift:s},{isNearly:m(e.right,s),lineNode:p.current.yr,line:"yr",dragShift:s-e.width,lineShift:s}]},j=[],f=o.rotate,Object.keys(h).forEach((function(t){h[t].forEach((function(n){var a;n.isNearly&&(a=0!==f?x(t,n,e):n.dragShift,b&&b(t,a,d),n.lineNode.style[t]="".concat(n.lineShift,"px"),j.push(n.line))}))})),j.length&&O(j))}))}),[d,v,s,u,m,x,b,O]);return Object(i.useEffect)((function(){(c?C:v)()}),[v,c,C]),Object(h.jsx)("div",{className:"drag-mark-line ",children:g.map((function(e){return Object(h.jsx)("div",{className:"line ".concat(e.includes("x")?"x-line":"y-line"),ref:function(t){p.current[e]=t},style:{display:j[e]?"block":"none"}},e)}))})})),k=n(261),M=n(332),N=n(120),S=n(226),I={version:"0.1.0",classify:[],name:"stage",showName:"\u821e\u53f0",uiSchema:{backgroundColor:{name:"\u80cc\u666f\u8272",type:"color",defaultValue:"#c7c7c7"}}},V=Object(i.lazy)((function(){return Promise.resolve().then(n.bind(null,226))})),E={mode:"show",componentsMeta:{},componentsInstance:[]};function P(){var e=(x=D()).activeComponent,t=x.activeComponentIndex,n=x.contextMenuState,a=x.hideContextMenu,c=n.show,o=n.top,r=n.left,l=Object(i.useCallback)((function(){a()}),[]),s=Object(i.useCallback)((function(){}),[]),u=Object(i.useCallback)((function(){}),[]),d=Object(i.useCallback)((function(){}),[]),b=Object(i.useCallback)((function(){}),[]),p=Object(i.useCallback)((function(){}),[]),j=Object(i.useCallback)((function(){}),[]),f=Object(i.useCallback)((function(){}),[]),m=Object(i.useCallback)((function(){}),[]),x=Object(i.useCallback)((function(){}),[]);n=Object(i.useCallback)((function(){}),[]);return c?Object(h.jsx)("div",{className:"context-menu",style:{top:o,left:r},children:Object(h.jsx)("ul",{onMouseUp:l,children:0!==t?Object(h.jsx)(h.Fragment,{children:e&&!e.isLock?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("li",{onClick:s,className:"disabled",children:"\u590d\u5236"}),Object(h.jsx)("li",{onClick:u,className:"disabled",children:"\u7c98\u8d34"}),Object(h.jsx)("li",{onClick:d,className:"disabled",children:"\u526a\u5207"}),Object(h.jsx)("li",{onClick:b,children:"\u5220\u9664"}),Object(h.jsx)("li",{onClick:p,className:"disabled",children:"\u9501\u5b9a"}),Object(h.jsx)("li",{onClick:j,children:"\u7f6e\u9876"}),Object(h.jsx)("li",{onClick:f,children:"\u7f6e\u5e95"}),Object(h.jsx)("li",{onClick:m,children:"\u4e0a\u79fb"}),Object(h.jsx)("li",{onClick:x,children:"\u4e0b\u79fb"})]}):Object(h.jsx)("li",{onClick:n,className:"disabled",children:"\u89e3\u9501"})}):Object(h.jsx)("li",{onClick:u,className:"disabled",children:"\u7c98\u8d34"})})}):null}function L(e){var t=void 0===(S=e.className)?"":S,n=(I=D()).componentsInstance,r=I.componentsMeta,l=I.activeComponentIndex,s=I.updateComponent,u=I.setActiveComponentIndex,d=I.showContextMenu,b=I.hideContextMenu,p=I.scale,j=Object(i.useState)({}),f=(V=Object(o.a)(j,2))[0],x=V[1],O=Object(i.useState)(),v=(e=Object(o.a)(O,2))[0],y=e[1],g=Object(i.useRef)(v),w=Object(i.useRef)(),k=Object(i.useCallback)((function(e){u(e)}),[u]),M=Object(i.useCallback)((function(e,t){s(t,{box:e}),y(void 0),g.current=void 0,x({curComponentStyle:e,isDownward:!1,isRightward:!1,isShow:!1})}),[s]),N=Object(i.useCallback)((function(e,t,n,a,c){w.current=e,"shape"===n&&x({curComponentStyle:t,isDownward:a,isRightward:c,isShow:!0})}),[]),S=Object(i.useCallback)((function(e){e.stopPropagation(),e.preventDefault();for(var t=e.target,n=e.nativeEvent.offsetY,a=e.nativeEvent.offsetX;t instanceof SVGElement;)t=t.parentNode;for(;!t.className.includes("editor-wrap");)a+=t.offsetLeft,n+=t.offsetTop,t=t.parentNode;d(n*p,a*p)}),[d,p]),I=Object(i.useCallback)((function(e){u(e)}),[]),V=(j=Object(i.useCallback)((function(e,t,n){void 0!==w.current&&(g.current&&g.current.curComponentStyle[e]===t||(t=Object(c.a)({},e,t),t={curComponentStyle:Object(a.a)(Object(a.a)({},n),t),id:w.current},g.current=t,y(t)))}),[]),Object(i.useMemo)((function(){return n.map((function(e){return e.box}))}),[n]));O=r.stage.component,e=Object(i.useMemo)((function(){return n[0]}),[n]);return Object(h.jsx)("div",{className:t,children:Object(h.jsxs)("div",{className:"editor-wrap",children:[Object(h.jsxs)(O,Object(a.a)(Object(a.a)({onContextMenu:S,id:"canvas-editor",onMouseDown:I.bind(null,0),onClick:function(){b()},scale:p,width:e.box.width,height:e.box.height},e.props),{},{children:[n.map((function(e,t){var c=e.type,o=e.props,s=e.box,u=e.id,d=e.dataSource,j=r[c];return j?(e=j.component,j=void 0===(j=j.suspenseFallback)?null:j,"stage"===c?null:(c=void 0!==l?n[l].id:"",Object(h.jsx)(m,{scale:{x:p,y:p},container:"#canvas-editor",isActive:u===c,shapeStyle:v&&u===v.id?v.curComponentStyle:s,onDragStart:function(){k(t)},onDrag:function(e,t,n,a){N(u,e,t,n,a)},onDragEnd:function(e){M(e,u)},onCLick:function(){b()},children:Object(h.jsx)(i.Suspense,{fallback:j,children:Object(h.jsx)("div",{style:{pointerEvents:"none",width:"100%",height:"100%",userSelect:"none"},children:Object(h.jsx)(e,Object(a.a)(Object(a.a)({},o),{},{width:s.width,height:s.height,data:null==d?void 0:d.staticData}))})})},u))):null})),Object(h.jsx)(C,{diff:8,getShapeOffset:j,activeComponentIndex:l,allComponentStyleList:V,curComponentStyle:f.curComponentStyle,isDownward:f.isDownward,isRightward:f.isRightward,isShow:f.isShow})]})),Object(h.jsx)(P,{})]})})}function z(){var e=(c=D()).componentsInstance,t=c.componentsMeta,n=Object(i.useMemo)((function(){return e[0]}),[e]),c=t.stage.component;return Object(h.jsx)(c,Object(a.a)(Object(a.a)({id:"canvas-editor",width:n.box.width,height:n.box.height},n.props),{},{children:e.map((function(e){var n=e.type,c=e.props,o=e.box,r=e.id,l=e.dataSource,s=t[n];return s?(e=s.component,s=void 0===(s=s.suspenseFallback)?null:s,"stage"===n?null:Object(h.jsx)(i.Suspense,{fallback:s,children:Object(h.jsx)("div",{style:{position:"absolute",top:o.top,left:o.left,width:o.width,height:o.height,zIndex:o.zIndex,transform:"rotate(".concat(o.rotate,"deg)")},children:Object(h.jsx)(e,Object(a.a)(Object(a.a)({},c),{},{width:o.width,height:o.height,data:null==l?void 0:l.staticData}))})},"".concat(r))):null}))}))}var D=(T=Object(M.a)((function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:E,t=Object(i.useState)(e.mode||"show"),n=(p=Object(o.a)(t,2))[0],c=p[1],r=Object(i.useState)(1),l=(j=Object(o.a)(r,2))[0],s=j[1],u=Object(i.useState)((0!==(v=e.componentsInstance||[]).length&&"stage"===v[0].type||v.unshift(S.defaultRootInstance),v)),d=(m=Object(o.a)(u,2))[0],h=m[1],b=Object(i.useState)(((x=e.componentsMeta||{}).stage||(x.stage=Object(a.a)(Object(a.a)({},I),{},{component:V})),x)),p=(t=Object(o.a)(b,2))[0],j=(r=t[1],Object(i.useState)(0)),f=(v=Object(o.a)(j,2))[0],m=(u=v[1],Object(i.useState)({top:0,left:0,show:!1})),x=(e=Object(o.a)(m,2))[0],O=e[1],v=(b=Object(i.useCallback)((function(e){e.id=Object(N.d)(),h((function(t){return[].concat(Object(k.a)(t),[e])}))}),[]),t=Object(i.useCallback)((function(e,t){h((function(n){var c=n.findIndex((function(t){return t.id===e}));return-1===c?n:(n[c]=Object(a.a)(Object(a.a)({},n[c]),t),Object(k.a)(n))}))}),[]),j=Object(i.useCallback)((function(e){s(2<e?2:e<.2?.2:e)}),[]),Object(i.useMemo)((function(){return void 0!==f?d[f]:void 0}),[f,d]));m=Object(i.useCallback)((function(e,t){O({show:!0,left:t,top:e})}),[]),e=Object(i.useCallback)((function(){O((function(e){return Object(a.a)(Object(a.a)({},e),{},{show:!1})}))}),[]);return{mode:n,setMode:c,componentsInstance:d,updateComponent:t,addComponent:b,componentsMeta:p,setComponentsMeta:r,activeComponentIndex:f,setActiveComponentIndex:u,contextMenuState:x,hideContextMenu:e,showContextMenu:m,activeComponent:v,scale:l,updateScale:j}}))).useContainer,F=T,R=(n(227),n(228),function(e){return e=void 0===(e=e.className)?"":e,"edit"===D().mode?Object(h.jsx)(L,{className:e}):Object(h.jsx)(z,{})}),_=(n(333),n(351)),A=n.n(_),W=n(158),X=n(82),Y=(t=(n(175),n(176)),n.n(t));n(337);M=n(338);var q=n.n(M);function J(e){if("object"!=typeof e)return"";try{return JSON.stringify(e,null,"\t")}catch(e){return""}}function B(e){var t=Object(i.useState)(J(e.value)),n=(r=Object(o.a)(t,2))[0],a=r[1],c=Object(i.useState)(!1),r=(t=Object(o.a)(c,2))[0],l=t[1],s=Object(i.useRef)();c=Object(i.useCallback)((function(t,n){var a;null!==(a=e.onChange)&&void 0!==a&&a.call(e,JSON.parse(n))}),[e]),t=Object(i.useCallback)((function(){var t,n=s.current();null!==(t=e.onSave)&&void 0!==t&&t.call(e,JSON.parse(n))}),[e]);return Object(i.useEffect)((function(){a(J(e.value))}),[e]),Object(h.jsxs)(Q,{children:[Object(h.jsx)(H.a,{height:e.height||500,width:e.width||"100%",language:"json",theme:"vs-dark",value:n,onChange:c,onMount:function(e){l(!0),s.current=e}}),e.onSave&&Object(h.jsx)($.a,{className:"btn-save",type:"primary",onClick:t,disabled:!r,children:"\u66f4\u65b0"})]})}n(126);var T=n(132),G=n.n(T),K=(_=function(e){var t=void 0===(t=e.value)?"":t,n=e.onChange;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{value:t,type:"color",onChange:function(e){return n(e.target.value)}}),Object(h.jsx)(G.a,{value:t,type:"text",onChange:function(e){return n(e.target.value)}})]})},t=(n(339),n(340)),n.n(t)),U=Object(X.a)(K.a).withConfig({displayName:"group__CollapseReset",componentId:"sc-157rqbb-0"})([".site-collapse-custom-panel{margin-bottom:10px;overflow:hidden;border:0px;border-radius:2px;}"]),$=(M=function(e){var t=e.name,n=void 0!==(n=e.isOpen)&&n;e=e.children;return Object(h.jsx)(U,{bordered:!1,defaultActiveKey:n?"1":void 0,children:Object(h.jsx)(K.a.Panel,{header:t,className:"site-collapse-custom-panel",children:e},"1")})},T=(n(109),n(103)),n.n(T)),H=n(411),Q=X.a.div.withConfig({displayName:"json-input__Wrap",componentId:"sc-1w8j8xf-0"})([".btn-save{margin:20px 0 0;}"]),Z=(t=(n(341),n(342)),n.n(t)),ee=(T=function(e){return Object(h.jsx)(Z.a,Object(a.a)(Object(a.a)({},e),{},{children:e.options.map((function(e){return Object(h.jsx)(Z.a.Option,{value:e.value,children:e.label},e.value)}))}))},t=(n(344),n(345)),n.n(t));n(346);t=n(347);var te=n.n(t);function ne(e){var t=e.config,n=e.name,c=t.name,o=t.type,i=t.props;e=re[o];if("hidden"===o)return null;if("group"!==o)return o=["boolean","switch"].includes(o)?"checked":"value",Object(h.jsx)(ie.a.Item,{name:n,label:c,labelAlign:"left",valuePropName:o,children:Object(h.jsx)(e,Object(a.a)({},i))});var r=t.children,l=t.baseParam;return Object(h.jsx)(e,Object(a.a)(Object(a.a)({name:c},i),{},{children:Object.keys(r).map((function(e){var t=(l?"".concat(l,"."):"")+e;return Object(h.jsx)(ne,{name:t,config:r[e]},t)}))}))}function ae(e){var t=e.value,n=e.config,c=e.successCB,r=(e=ie.a.useForm(),Object(o.a)(e,1)[0]);return Object(i.useEffect)((function(){r.resetFields()}),[r,t]),e=Object(i.useCallback)((function(e){c(e)}),[c]),Object(h.jsxs)(ie.a,Object(a.a)(Object(a.a)({onFinish:e,initialValues:t},le),{},{form:r,children:[Object.keys(n).map((function(e){return Object(h.jsx)(ne,{name:e,config:n[e]},e)})),Object(h.jsx)(ie.a.Item,{children:Object(h.jsx)($.a,{type:"primary",htmlType:"submit",children:"\u66f4\u65b0"})})]}))}function ce(){var e=(s=D()).activeComponent,t=s.componentsMeta,n=s.updateComponent,c=(l=e||{}).box,o=l.props,r=l.type,l=(s=Object(i.useMemo)((function(){var e=Object(a.a)(Object(a.a)({},se),r?t[r].uiSchema:{}),n=Object(N.b)(e),i=Object(N.a)(o);return{config:e,defaultValue:Object(a.a)(Object(a.a)(Object(a.a)({},n),i),c)}}),[c,t,o,r])).config,s=s.defaultValue;return Object(h.jsx)(ue,{children:Object(h.jsx)(ae,{value:s,config:l,successCB:function(t){var i=t.width,r=t.height,l=t.top,s=t.left,u=t.rotate,d=t.zIndex;t=Object(W.a)(t,["width","height","top","left","rotate","zIndex"]);e&&n(e.id,{box:Object(a.a)(Object(a.a)({},c),{},{width:i,height:r,top:l,left:s,rotate:u,zIndex:d}),props:Object(a.a)(Object(a.a)({},o),Object(N.c)(t))})}})})}n(197);t=n(211);var oe,ie=n.n(t),re=(t=(n(349),n(350)),t=n.n(t),{text:G.a,boolean:function(e){return Object(h.jsx)(Y.a,Object(a.a)({},e))},number:t.a,color:_,select:T,json:B,buttonRadio:function(e){return Object(h.jsx)(q.a.Group,Object(a.a)(Object(a.a)({},e),{},{children:null===(e=e.options)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(q.a,{value:e.value,children:e.label},e.value)}))}))},slider:function(e){var t=e.suffix,n=e.prefix;return Object(h.jsxs)(h.Fragment,{children:[!!t&&Object(h.jsx)("label",{children:t}),Object(h.jsx)(ee.a,Object(a.a)({},e)),!!n&&Object(h.jsx)("label",{children:n})]})},group:M,switch:function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(te.a,Object(a.a)({},e))})},checkbox:function(e){return Object(h.jsx)(Y.a.Group,Object(a.a)(Object(a.a)({},e),{},{children:null===(e=e.options)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(Y.a,{value:e.value,children:e.label},e.value)}))}))}}),le={labelCol:{span:7},wrapperCol:{span:19}},se={box:{name:"\u5c3a\u5bf8",type:"group",props:{isOpen:!0},children:{width:{name:"\u5bbd\u5ea6",type:"number",defaultValue:300},height:{name:"\u9ad8\u5ea6",type:"number",defaultValue:200},top:{name:"Y\u8f74\u504f\u79fb",type:"number",defaultValue:200},left:{name:"X\u8f74\u504f\u79fb",type:"number",defaultValue:200},rotate:{name:"\u65cb\u8f6c",type:"number",defaultValue:0},opacity:{name:"\u900f\u660e\u5ea6",type:"slider",defaultValue:1,props:{min:0,max:1,step:.1}}}}},ue=X.a.div.withConfig({displayName:"ui-schema-panel__Wrap",componentId:"sc-10hhlgj-0"})(["font-size:20px;height:100%;"]),de=X.a.div.withConfig({displayName:"data-schema-panel__Wrap",componentId:"sc-11cyz97-0"})(["font-size:20px;height:100%;"]),he={url:{name:"URL",type:"text",defaultValue:""},staticData:{name:"\u9759\u6001\u6570\u636e",type:"json",defaultValue:{}},updateInterval:{name:"\u66f4\u65b0\u95f4\u9694",type:"number",defaultValue:1}},be={};for(oe in he)be[oe]=he[oe].defaultValue;function pe(){var e=(n=D()).activeComponent,t=n.updateComponent,n=Object(i.useCallback)((function(n){e&&t(e.id,{dataSource:Object(a.a)(Object(a.a)({},e.dataSource),n)})}),[e,t]);return Object(h.jsx)(de,{children:Object(h.jsx)(ae,{value:(null==e?void 0:e.dataSource)||be,config:he,successCB:n})})}function je(){var e=D(),t=e.updateComponent,n=e.activeComponent;return Object(h.jsx)(B,{value:n||{},onSave:function(e){return n&&t(n.id,e)}})}function fe(){var e=D().activeComponent;return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("span",{className:"name",children:(null==e?void 0:e.name)||"--"}),Object(h.jsx)("span",{className:"version",children:null!=e&&e.version?"v".concat(null==e?void 0:e.version):"--"})]})}var me=A.a.TabPane,xe=X.a.div.withConfig({displayName:"configuration-panel__Wrap",componentId:"sc-1jfs82z-0"})(["min-width:340px;height:100%;padding:10px;background:#25282e;color:#fff;.header{.name{margin-right:10px;font-size:12px;}.version{color:#7d7c7c;}}"]),Oe=function(e){var t=void 0===(t=e.className)?"":t;e=e.style;return 0===D().componentsInstance.length?Object(h.jsx)(xe,{className:t,style:e}):Object(h.jsx)(xe,{className:t,style:e,children:Object(h.jsxs)(A.a,{defaultActiveKey:"1",type:"card",children:[Object(h.jsxs)(me,{tab:"\u914d\u7f6e",children:[Object(h.jsx)(fe,{}),Object(h.jsx)(ce,{})]},"1"),Object(h.jsxs)(me,{tab:"\u6570\u636e",children:[Object(h.jsx)(fe,{}),Object(h.jsx)(pe,{})]},"2"),Object(h.jsxs)(me,{tab:"code",children:[Object(h.jsx)(fe,{}),Object(h.jsx)(je,{})]},"3")]})})},ve=function(e){var t=void 0===(a=e.mode)?"show":a,n=e.componentsMeta,a=e.componentsInstance;e=e.children;return Object(h.jsx)(F.Provider,{initialState:{mode:t,componentsMeta:n,componentsInstance:a},children:e})}},120:function(e,t,n){"use strict";function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12;return Number(Math.random().toString().substr(3,e)+Date.now()).toString(36)}n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var c=function e(t){var n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",c={};for(n in t){var o,i=t[n];"group"===i.type?e(i.children,(o=i.baseParam)?"".concat(o):""):c[a+n]=i.defaultValue}return c};function o(e){if(Object(e)!==e||Array.isArray(e))return e;var t,n=/\.?([^.\[\]]+)|\[(\d+)\]/g,a={};for(t in e){for(var c,o=a,i="";c=n.exec(t);)o=o[i]||(o[i]=c[2]?[]:{}),i=c[2]||c[1];o[i]=e[t]}return a[""]||a}function i(e){var t={};return function e(n,a){if(Object(n)!==n)t[a]=n;else if(Array.isArray(n)){for(var c=n.length,o=0;o<c;o++)e(n[o],"".concat(a,"[").concat(o,"]"));0===c&&(t[a]=[])}else{var i,r=!0;for(i in n)r=!1,e(n[i],a?"".concat(a,".").concat(i):i);r&&a&&(t[a]={})}}(e,""),t}},135:function(e,t,n){"use strict";t.a={version:"0.1.0",classify:["interactive"],name:"iframe",showName:"iframe\u7a97\u53e3",uiSchema:{src:{name:"\u94fe\u63a5",type:"text",defaultValue:""},title:{name:"\u540d\u79f0",type:"text",defaultValue:""},closable:{name:"\u662f\u5426\u53ef\u5173\u95ed",type:"boolean",defaultValue:!1}}}},136:function(e,t,n){"use strict";t.a={version:"0.1.0",classify:["text"],name:"tag",showName:"\u6807\u7b7e",uiSchema:{text:{name:"\u6587\u672c",type:"text",defaultValue:"\u6211\u662f\u4e00\u4e2a\u6807\u7b7e"},color:{name:"\u989c\u8272",type:"color",defaultValue:"#ff0000"}}}},137:function(e,t,n){"use strict";t.a={version:"0.1.0",classify:["media"],name:"image",showName:"\u56fe\u7247",uiSchema:{imgRepeatType:{name:"\u56fe\u7247\u91cd\u590d",type:"select",defaultValue:"\u4e0d\u91cd\u590d\u62c9\u4f38\u6ee1",props:{options:[{value:"\u4e0d\u91cd\u590d\u62c9\u4f38\u6ee1",label:"\u4e0d\u91cd\u590d\u62c9\u4f38\u6ee1"},{value:"\u6c34\u5e73\u548c\u5782\u76f4\u91cd\u590d",label:"\u6c34\u5e73\u548c\u5782\u76f4\u91cd\u590d"},{value:"\u6c34\u5e73\u91cd\u590d",label:"\u6c34\u5e73\u91cd\u590d"},{value:"\u5782\u76f4\u91cd\u590d",label:"\u5782\u76f4\u91cd\u590d"}]}},url:{name:"\u56fe\u7247\u94fe\u63a5",type:"text",defaultValue:"https://sf6-ttcdn-tos.pstatp.com/img/user-avatar/0189ed0e459221e36d1fe35ef018ea39~300x300.images"},target:{name:"\u662f\u5426\u65b0\u5f00\u7a97\u53e3",type:"switch",defaultValue:!1,props:{checkedChildren:"\u5f00",unCheckedChildren:"\u5173"}}}}},138:function(e,t,n){"use strict";t.a={version:"0.1.0",name:"pie-chart",showName:"\u997c\u56fe",classify:["pie-chart"],uiSchema:{title:{name:"\u6807\u9898",type:"group",baseParam:"title",children:{visible:{name:"\u662f\u5426\u5c55\u793a",type:"boolean",defaultValue:!0},text:{name:"\u6587\u672c",type:"text",defaultValue:"\u591a\u8272\u997c\u56fe"}}},description:{name:"\u63cf\u8ff0",type:"group",baseParam:"description",children:{visible:{name:"\u662f\u5426\u5c55\u793a",type:"boolean",defaultValue:!0},text:{name:"\u6587\u672c",type:"text",defaultValue:"\u6307\u5b9a\u989c\u8272\u6620\u5c04\u5b57\u6bb5(colorField)\uff0c\u997c\u56fe\u5207\u7247\u5c06\u6839\u636e\u8be5\u5b57\u6bb5\u6570\u636e\u663e\u793a\u4e3a\u4e0d\u540c\u7684\u989c\u8272\u3002\u6307\u5b9a\u989c\u8272\u9700\u8981\u5c06color\u914d\u7f6e\u4e3a\u4e00\u4e2a\u6570\u7ec4\u3002\n\u5f53\u628a\u997c\u56felabel\u7684\u7c7b\u578b\u8bbe\u7f6e\u4e3ainner\u65f6\uff0c\u6807\u7b7e\u4f1a\u663e\u793a\u5728\u5207\u7247\u5185\u90e8\u3002\u8bbe\u7f6eoffset\u63a7\u5236\u6807\u7b7e\u7684\u504f\u79fb\u503c\u3002"}}},radius:{name:"\u534a\u5f84",type:"number",defaultValue:.8},angleField:{name:"\u6247\u5f62\u5207\u7247\u5b57\u6bb5",type:"text",defaultValue:"value"},colorField:{name:"\u6247\u5f62\u989c\u8272\u5b57\u6bb5",type:"text",defaultValue:"type"},label:{name:"\u6807\u7b7e\u6587\u672c",type:"group",baseParam:"label",children:{visible:{name:"\u662f\u5426\u5c55\u793a",type:"boolean",defaultValue:!0},type:{name:"\u6807\u7b7e\u6587\u672c\u7c7b\u578b",type:"select",props:{options:[{label:"\u6247\u5f62\u5207\u7247\u5185",value:"inner"},{label:"\u997c\u5916",value:"outer"},{label:"\u5706\u5f62\u6392\u5e03\u4e8e\u997c\u5916",value:"outer-center"},{label:"\u8718\u86db\u5e03\u5c40",value:"spider"}]},defaultValue:"inner"}}},forceFit:{name:"\u81ea\u9002\u5e94\u5bb9\u5668\u5bbd\u9ad8",type:"boolean",defaultValue:!0}},dataSchema:{staticData:[{type:"\u5206\u7c7b\u4e00",value:27},{type:"\u5206\u7c7b\u4e8c",value:25},{type:"\u5206\u7c7b\u4e09",value:18},{type:"\u5206\u7c7b\u56db",value:15},{type:"\u5206\u7c7b\u4e94",value:10},{type:"\u5176\u5b83",value:5}]}}},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e=new RegExp("(^|&)".concat(e,"=([^&]*)(&|$)")),null!==(e=window.location.search.substr(1).match(e))?decodeURI(e[2]):void 0}},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t),n.d(t,"defaultRootInstance",(function(){return r}));var a=n(57),c=n(158),o=n(0),i=(o=n(82),n(2)),r={id:"stage",type:"stage",name:"\u821e\u53f0",version:"0.1.0",box:{width:1200,height:740,left:0,top:0,zIndex:1,rotate:0},props:{backgroundColor:"#c7c7c7"}},l=o.a.div.withConfig({displayName:"stage__Wrap",componentId:"sc-5dubfq-0"})(["position:relative;transform-origin:0 0;"]);t.default=function(e){var t=e.width,n=e.height,o=e.backgroundColor,r=void 0===(s=e.scale)?1:s,s=Object(c.a)(e,["width","height","backgroundColor","scale"]);return Object(i.jsx)(l,Object(a.a)(Object(a.a)({},s),{},{style:{width:t,height:n,backgroundColor:o,transform:"scale(".concat(r)},children:e.children}))}},227:function(e,t,n){},228:function(e,t,n){},231:function(e,t,n){"use strict";var a=n(57),c=n(0),o=n(135),i=n(136),r=n(137),l=n(138),s=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,450))})),u=Object(c.lazy)((function(){return n.e(8).then(n.bind(null,451))})),d=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,452))}));c=Object(c.lazy)((function(){return Promise.all([n.e(9),n.e(6)]).then(n.bind(null,453))})),c={iframe:Object(a.a)(Object(a.a)({},o.a),{},{component:s}),tag:Object(a.a)(Object(a.a)({},i.a),{},{component:u}),image:Object(a.a)(Object(a.a)({},r.a),{},{component:d}),"pie-chart":Object(a.a)(Object(a.a)({},l.a),{},{component:c})};t.a=c},698:function(e,t,n){},699:function(e,t,n){},700:function(e,t,n){},743:function(e,t,n){"use strict";function a(e){var t=(c=Object(v.d)()).addComponent,n=c.componentsMeta,a=c.componentsInstance,c=Object(l.useCallback)((function(){var c=e.name,o=e.showName,i=e.closeFunc,r=e.version,l={},s=(h=n[c]).uiSchema,u=h.dataSchema;!function e(t){var n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";for(n in t){var c,o=t[n];"group"===o.type?e(o.children,(c=o.baseParam)?"".concat(c):""):l[a+n]=o.defaultValue}}(s);var d=[a[0].box.width/2,a[0].box.height/2],h=(s=(h=[l.width||150,l.height||150])[0],h[1]);i(),t({id:"",type:c,name:o,version:r,box:{width:s,height:h,top:d[1]-h/2,left:d[0]-s/2,zIndex:1,rotate:0},props:Object(O.a)(Object(O.a)({},Object(g.c)(l)),{},{width:s,height:h}),dataSource:u||{}})}),[e,n,a,t]);return Object(w.jsx)("div",{className:"component-item",onClick:c,children:e.showName})}function c(e){var t=e.subList,n=e.components,c=Object(l.useState)(t?[t[0].key]:[]),o=(s=Object(x.a)(c,2))[0],i=s[1],r=(c=Object(l.useState)([]),c=(s=Object(x.a)(c,2))[0],s[1]),s=Object(l.useCallback)((function(t){return 0<t.length?Object(w.jsx)("div",{className:"component-list",children:t.map((function(t){return Object(w.jsx)(a,Object(O.a)(Object(O.a)({},t),{},{closeFunc:e.closeFunc}),t.name)}))}):Object(w.jsx)(m.a,{style:{paddingTop:"12px"}})}),[e.closeFunc]);return Object(l.useEffect)((function(){var e;t&&(e=t.find((function(e){return e.key===o[0]})),r(e?e.components:[]))}),[o,t]),Object(w.jsx)(k,{children:t?Object(w.jsxs)("div",{className:"content-wrap",children:[Object(w.jsx)("div",{className:"menu-wrap",children:Object(w.jsx)(f.a,{selectedKeys:o,onSelect:function(e){return i([e.key])},children:t.map((function(e){return Object(w.jsx)(f.a.Item,{children:e.name},e.key)}))})}),Object(w.jsx)("div",{className:"component-wrap",children:s(c)})]}):s(n)})}function o(){var e=Object(v.d)().componentsMeta,t=Object(l.useState)(),n=Object(x.a)(t,2),a=n[0],o=n[1],i=(t=Object(l.useState)(),t=(n=Object(x.a)(t,2))[0],n[1]),r=Object(l.useCallback)((function(){o(void 0)}),[]);return Object(l.useEffect)((function(){var t,n,a;t=Object.keys(e).map((function(t){return e[t]})),n=Object(j.a)(y),a={},n.forEach((function(e,t){e.key?a[e.key]="".concat(t):e.subList&&e.subList.forEach((function(e,n){a[e.key]="".concat(t,".").concat(n)}))})),t.forEach((function(e){e.classify&&e.classify.forEach((function(t){0!==(t=a[t]?a[t].split("."):[]).length&&(1===t.length?n[Number(t[0])].components.push(e):2===t.length&&n[Number(t[0])].subList[Number(t[1])].components.push(e))}))})),i(n)}),[e]),Object(w.jsx)(C,{children:t?t.map((function(e){return Object(w.jsx)(p.a,{onVisibleChange:function(t){o(e.name),t||o(void 0)},trigger:["click"],overlay:Object(w.jsx)(c,Object(O.a)(Object(O.a)({},e),{},{closeFunc:r})),children:Object(w.jsx)("div",{className:"category ".concat(e.name===a?"selected":""),children:e.name})},e.name)})):null})}function i(){var e=Object(N.a)("id"),t=Object(v.d)().componentsInstance;return Object(w.jsxs)("div",{className:"wrap",children:[Object(w.jsxs)("div",{className:"component-warp",children:[Object(w.jsx)(d.a,{to:M.a,children:Object(w.jsx)(h.a,{className:"icon"})}),Object(w.jsx)(o,{})]}),Object(w.jsx)("div",{className:"handle-wrap",children:Object(w.jsx)("span",{onClick:function(){e?(localStorage.setItem(e,JSON.stringify(t)),window.open("".concat(M.c,"?id=").concat(e))):u.a.warning("\u5f53\u524d\u8def\u7531id\u65e0\u6570\u636e\uff0c\u65e0\u6cd5\u53d1\u5e03\u3002")},className:"release-wrap",children:Object(w.jsx)(b.a,{className:"icon release"})})})]})}function r(){var e=Object(v.d)(),t=e.componentsInstance,n=e.activeComponent,a=e.setActiveComponentIndex;return Object(w.jsxs)(S,{children:[Object(w.jsx)("div",{className:"label",children:"\u56fe\u5c42"}),Object(w.jsx)("ul",{className:"layer-list",children:t.map((function(e,t){var c=e.id;e=e.name;return Object(w.jsx)("li",{className:"com-item ".concat((null==n?void 0:n.id)===c?"com-checked":null),onClick:function(){a(t)},children:e},c)}))})]})}n.r(t);var l=n(0),s=(n(661),n(207)),u=n.n(s),d=n(45),h=n(747),b=n(748),p=(s=(n(663),n(696)),n.n(s)),j=n(261),f=(s=(n(272),n(324)),n.n(s)),m=(s=(n(331),n(288)),n.n(s)),x=n(78),O=n(57),v=n(113),y=(s=n(82),[{name:"\u56fe\u8868",icon:"",subList:[{name:"\u67f1\u72b6\u56fe",icon:"",key:"bar-chart",components:[]},{name:"\u6298\u7ebf\u56fe",icon:"",key:"line-chart",components:[]},{name:"\u997c\u56fe",icon:"",key:"pie-chart",components:[]},{name:"\u6563\u70b9\u56fe",icon:"",key:"scatter-chart",components:[]},{name:"\u5176\u4ed6",icon:"",key:"other-chart",components:[]}],components:[]},{name:"\u5a92\u4f53",key:"media",icon:"",components:[]},{name:"\u6587\u5b57",key:"text",icon:"",components:[]},{name:"\u8f85\u52a9",key:"interactive",icon:"",components:[]}]),g=n(120),w=n(2),C=s.a.div.withConfig({displayName:"component-list__ComponentListWrap",componentId:"sc-190ecry-0"})(["display:flex;color:white;box-shadow:rgba(43,146,210,0.1) 0px 2px 4px 0px;align-items:center;.category{display:flex;align-items:center;justify-content:center;height:40px;padding:0 12px;cursor:pointer;&:hover{background-color:rgba(8,14,33,0.5);}&.selected{color:rgba(21,139,246,1);background-color:rgba(8,14,33,0.3);}}"]),k=s.a.div.withConfig({displayName:"component-list__OverlayWrap",componentId:"sc-190ecry-1"})(["width:300px;height:160px;background-color:#000;color:#fff;.component-list{display:grid;grid-row-gap:8px;grid-column-gap:8px;grid-template-columns:repeat(5,1fr);padding:8px;}.component-item{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border:1px solid rgba(35,198,254,1);cursor:pointer;&:hover{background:rgba(255,255,255,0.4);}}.content-wrap{display:flex;}.menu-wrap{flex:none;width:80px;}.component-wrap{flex:auto;overflow:auto;}"]),M=n(7),N=n(177),S=(n(698),s.a.div.withConfig({displayName:"layer-list__ComponentListWrap",componentId:"g97dyu-0"})(["position:relative;width:200px;height:100%;overflow-y:auto;color:#fff;background-color:#202327;.label{height:40px;padding:0 16px;line-height:40px;text-align:center;background:#373a44;}.layer-list{flex:1;padding:0;overflow-y:auto;transition:all linear 0.2s;.com-item{position:relative;display:flex;align-items:center;height:44px;padding:0 8px;list-style:none;outline:none;cursor:pointer;&:hover{color:#fff;}}.com-checked{background:rgb(36,145,247);}}"]));function I(){var e=(a=Object(v.d)()).scale,t=a.updateScale,n=Object(l.useCallback)((function(){t(+(e+.1).toFixed(1))}),[e,t]),a=Object(l.useCallback)((function(){t(+(e-.1).toFixed(1))}),[e,t]);return Object(w.jsxs)("div",{className:"slider",children:[Object(w.jsx)("span",{className:"slider-btn",onClick:n,children:"+"}),Object(w.jsxs)("span",{className:"slider-number",children:[(100*e).toFixed(0),"%"]}),Object(w.jsx)("span",{className:"slider-btn",onClick:a,children:"-"})]})}n(699);var V=n(231);n(700),t.default=function(){var e=Object(N.a)("id"),t=Object(l.useMemo)((function(){if(!e)return[];var t=localStorage.getItem(e);return t?JSON.parse(t):[]}),[e]);return Object(w.jsx)("div",{className:"layout-wrap",children:Object(w.jsxs)(v.c,{mode:"edit",componentsMeta:V.a,componentsInstance:t,children:[Object(w.jsx)(i,{}),Object(w.jsxs)("div",{className:"layout-content",children:[Object(w.jsx)(r,{}),Object(w.jsx)("div",{className:"canvas-wrap",children:Object(w.jsx)("div",{className:"canvas-content grid-wrap",children:Object(w.jsx)(v.a,{})})}),Object(w.jsx)(v.b,{})]}),Object(w.jsx)(I,{})]})})}}}]);