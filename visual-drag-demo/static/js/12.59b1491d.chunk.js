(this["webpackJsonpvisual-drag-demo"]=this["webpackJsonpvisual-drag-demo"]||[]).push([[12],{113:function(e,t,n){"use strict";n.d(t,"c",(function(){return ve})),n.d(t,"d",(function(){return L})),n.d(t,"a",(function(){return F})),n.d(t,"b",(function(){return Oe}));var a=n(57),c=n(134),o=n(78),i=n(0);function r(e){return(e+360)%360}function l(e,t,n){return{x:(e.x-t.x)*Math.cos(s(n))-(e.y-t.y)*Math.sin(s(n))+t.x,y:(e.x-t.x)*Math.sin(s(n))+(e.y-t.y)*Math.cos(s(n))+t.y}}function u(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}function s(e){return e*Math.PI/180}var d={lt:function(e,t,n,a,c){var o=c.symmetricPoint,i=u(t,o),r=l(t,i,-e.rotate),s=l(o,i,-e.rotate);c=s.x-r.x,t=s.y-r.y;a&&(n<c/t?(r.x+=Math.abs(c-t*n),c=t*n):(r.y+=Math.abs(t-c/n),t=c/n),n=l(r,i,e.rotate),r=l(n,i=u(n,o),-e.rotate),c=(s=l(o,i,-e.rotate)).x-r.x,t=s.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(r.x),e.top=Math.round(r.y))},t:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:i.x,y:c.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.width,a&&(t=c*n),e.width=t,e.height=Math.round(c),e.top=Math.round(o-c/2),e.left=Math.round(i-e.width/2))},rt:function(e,t,n,a,c){var o=c.symmetricPoint,i=u(t,o),r=l(t,i,-e.rotate),s=l(o,i,-e.rotate);c=r.x-s.x,t=s.y-r.y;a&&(n<c/t?(r.x-=Math.abs(c-t*n),c=t*n):(r.y+=Math.abs(t-c/n),t=c/n),n=l(r,i,e.rotate),r=l(n,i=u(n,o),-e.rotate),s=l(o,i,-e.rotate),c=r.x-s.x,t=s.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(s.x),e.top=Math.round(r.y))},r:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:c.x,y:i.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.height,a&&(t=c/n),e.height=t,e.width=Math.round(c),e.top=Math.round(o-e.height/2),e.left=Math.round(i-c/2))},rb:function(e,t,n,a,c){var o=c.symmetricPoint,i=u(t,o),r=l(o,i,-e.rotate),s=l(t,i,-e.rotate);c=s.x-r.x,t=s.y-r.y;a&&(n<c/t?(s.x-=Math.abs(c-t*n),c=t*n):(s.y-=Math.abs(t-c/n),t=c/n),n=l(s,i,e.rotate),r=l(o,i=u(n,o),-e.rotate),c=(s=l(n,i,-e.rotate)).x-r.x,t=s.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(r.x),e.top=Math.round(r.y))},b:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:i.x,y:c.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.width,a&&(t=c*n),e.width=t,e.height=Math.round(c),e.top=Math.round(o-c/2),e.left=Math.round(i-e.width/2))},lb:function(e,t,n,a,c){var o=c.symmetricPoint,i=u(t,o),r=l(o,i,-e.rotate),s=l(t,i,-e.rotate);c=r.x-s.x,t=s.y-r.y;a&&(n<c/t?(s.x+=Math.abs(c-t*n),c=t*n):(s.y-=Math.abs(t-c/n),t=c/n),n=l(s,i,e.rotate),r=l(o,i=u(n,o),-e.rotate),s=l(n,i,-e.rotate),c=r.x-s.x,t=s.y-r.y),0<c&&0<t&&(e.width=Math.round(c),e.height=Math.round(t),e.left=Math.round(s.x),e.top=Math.round(r.y))},l:function(e,t,n,a,c){var o=c.symmetricPoint,i=c.curPoint;c=l(t,i,-e.rotate),t=l({x:c.x,y:i.y},i,e.rotate);0<(c=Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2)))&&(i=t.x-(t.x-o.x)/2,o=t.y+(o.y-t.y)/2,t=e.height,a&&(t=c/n),e.height=t,e.width=Math.round(c),e.top=Math.round(o-e.height/2),e.left=Math.round(i-c/2))}};n(224);var h=n(2),b=["lt","t","rt","r","rb","b","lb","l"],f={lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},p=[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],j="drag-shape-point";function m(e){var t=e.children,n=e.shapeStyle,c=e.isActive,l=e.container,u=void 0===(I=e.scale)?{x:1,y:1}:I,s=e.onDrag,m=e.onDragStart,x=e.onDragEnd,O=e.onCLick,v=Object(i.useState)({width:n.width,height:n.height}),y=(I=Object(o.a)(v,2))[0],g=I[1],w=(e=Object(i.useState)({}),(v=Object(o.a)(e,2))[0]),C=v[1],M=Object(i.useRef)(null),S=Object(i.useCallback)((function(e){var t=y.width,n=y.height,a=/t/.test(e),c=/b/.test(e),o=/l/.test(e),i=/r/.test(e),r=0,l=0;return 2===e.length?(r=o?0:t,l=a?0:n):((a||c)&&(r=t/2,l=a?0:n),(o||i)&&(r=o?0:t,l=Math.floor(n/2))),{marginLeft:"-4px",marginTop:"-4px",left:"".concat(r,"px"),top:"".concat(l,"px"),cursor:w[e]}}),[y,w]),k=Object(i.useCallback)((function(){var e=r(n.rotate),t={},a=-1;return b.forEach((function(n){for(var c=r(f[n]+e),o=p.length;;){var i=p[a=(a+1)%o];if(c<23||338<=c)return void(t[n]="nw-resize");if(i.start<=c&&c<i.end)return void(t[n]="".concat(i.cursor,"-resize"))}})),t}),[n.rotate]),N=Object(i.useCallback)((function(e,t){var c;m&&m(n),t.stopPropagation(),t.preventDefault();var o=Object(a.a)({},n),i=u.x,r=u.y,h=o.width/o.height,b={x:o.left+o.width/2,y:o.top+o.height/2},f=null===(c=document.querySelector(l))||void 0===c?void 0:c.getBoundingClientRect();if(!f)throw new Error("container\u5c5e\u6027\u4e3a\u7a7a\uff0c\u6216\u8005\u83b7\u53d6\u753b\u5e03dom\u5931\u8d25");function p(t){var n,c,l,u;v?v=!1:(u={x:(t.clientX-f.left)/i,y:(t.clientY-f.top)/r},n=o,c=u,l=h,t=!1,u={center:b,curPoint:j,symmetricPoint:O},d[e](n,c,l,t,u),M.current&&((u=M.current.style).top="".concat(o.top,"px"),u.left="".concat(o.left,"px"),u.width="".concat(o.width,"px"),u.height="".concat(o.height,"px")),g({width:o.width,height:o.height}),s&&s(Object(a.a)({},o),"point"))}var j={x:(t.clientX-f.left)/i,y:(t.clientY-f.top)/r},O={x:b.x-(j.x-b.x),y:b.y-(j.y-b.y)},v=!0;t=function e(){x&&x(o),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",t)}),[m,n,u,l,s,x]),I=Object(i.useCallback)((function(e){function t(e){var t=e.clientX;e=e.clientY,t=Math.atan2(e-u,t-l)/(Math.PI/180);c.rotate=Math.round(r+t-d),M.current&&(M.current.style.transform="rotate(".concat(c.rotate,"deg)")),s&&s(Object(a.a)({},c),"rotate")}m&&m(n),e.stopPropagation(),e.preventDefault();var c=Object(a.a)({},n),o=e.clientY,i=e.clientX,r=c.rotate,l=(e=M.current.getBoundingClientRect()).left+e.width/2,u=e.top+e.height/2,d=Math.atan2(o-u,i-l)/(Math.PI/180);i=function e(){x&&x(c),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}),[n,s,x,m]);e=Object(i.useCallback)((function(e){var t,c,o,i,r,l,d,h,b;e.target.dataset.index!==j&&(m&&m(n),e.stopPropagation(),t=Object(a.a)({},n),c=e.clientY,o=e.clientX,i=Number(t.top),r=Number(t.left),l=u.x,d=u.y,h=function(n){var u=n.clientX,h=n.clientY;t.top=(h-c)/d+i,t.left=(u-o)/l+r,(n=e.target.style).top="".concat(t.top,"px"),n.left="".concat(t.left,"px"),s&&s(Object(a.a)({},t),"shape",0<h-c,0<u-o)},b=function e(){x&&x(t),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",e)},document.addEventListener("mousemove",h),document.addEventListener("mouseup",b))}),[m,n,u,s,x]),v=Object(i.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),O&&O()}),[O]);return Object(i.useEffect)((function(){g({width:n.width,height:n.height})}),[n.height,n.width]),Object(i.useEffect)((function(){c&&C(k())}),[c,k]),Object(h.jsxs)("div",{className:"drag-shape-wrap",onMouseDown:e,onClick:v,ref:M,style:{top:n.top,left:n.left,width:n.width,height:n.height,zIndex:n.zIndex,transform:"rotate(".concat(n.rotate,"deg)"),outline:c?"1px solid #70c0ff":"none"},children:[c&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:Object(h.jsxs)("svg",{onMouseDown:I,"data-index":j,className:"drag-shape-rotate",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3070",children:[Object(h.jsx)("path",{d:"M512 957.671444c-237.936053 0-431.558986-193.622933-431.558986-431.558985S274.063947 94.553473 512 94.553473c86.368247 0 169.914002 25.402426 241.323043 73.667034 14.112459 9.596472 18.063947 28.789416 8.467475 43.184124-9.596472 14.112459-28.789416 18.063947-43.184123 8.467475-60.965821-41.208379-132.657111-63.223815-206.606395-63.223815-203.783903 0-369.464168 165.680265-369.464168 369.464168s165.680265 369.464168 369.464168 369.464167c98.787211 0 191.364939-38.385888 261.362734-108.101433s108.101433-162.575524 108.101434-261.362734c0-17.2172 13.830209-31.047409 31.047409-31.047409s31.047409 13.830209 31.047409 31.047409c0 115.157663-44.877619 223.541345-126.44763 305.111356s-189.953693 126.44763-305.111356 126.447629z","p-id":"3071"}),Object(h.jsx)("path",{d:"M822.191841 257.693495c-16.652701 8.185226-36.974642 1.411246-45.442117-15.241455l-77.054024-154.108049c-8.185226-16.652701-1.411246-36.974642 15.241455-45.442117 16.652701-8.185226 36.974642-1.411246 45.442117 15.241456l77.054025 154.108048c8.185226 16.652701 1.411246 36.974642-15.241456 45.442117z","p-id":"3072"}),Object(h.jsx)("path",{d:"M622.641676 319.506064c-8.185226-16.652701-1.411246-36.974642 15.241455-45.442117l154.108049-77.054024c16.652701-8.185226 36.974642-1.411246 45.442117 15.241455 8.185226 16.652701 1.411246 36.974642-15.241456 45.442117l-154.108048 77.054024c-16.93495 8.185226-37.256891 1.411246-45.442117-15.241455z","p-id":"3073"})]})}),b.map((function(e){return Object(h.jsx)("div",{className:"drag-shape-point",style:S(e),"data-index":j,onMouseDown:N.bind(null,e)},e)}))]}),t]})}function x(e){return e*Math.PI/180}function O(e){return Math.abs(Math.cos(x(e)))}function v(e){return Math.abs(Math.sin(x(e)))}function y(e){var t,n,c=Object(a.a)({},e);return 0!==c.rotate?(t=c.width*O(c.rotate)+c.height*v(c.rotate),n=(c.width-t)/2,c.left+=n,c.right=c.left+t,n=((e=c.height*O(c.rotate)+c.width*v(c.rotate))-c.height)/2,c.top-=n,c.bottom=c.top+e,c.width=t,c.height=e):(c.bottom=c.top+c.height,c.right=c.left+c.width),c}n(225);var g=["xt","xc","xb","yl","yc","yr"],w={xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1},C=Object(i.memo)((function(e){var t=e.diff,n=void 0===t?3:t,c=e.isShow,r=e.isDownward,l=e.isRightward,u=e.allComponentStyleList,s=e.activeComponentIndex,d=e.curComponentStyle,b=e.getShapeOffset,f=Object(i.useRef)({}),p=(e=Object(i.useState)(w),(e=Object(o.a)(e,2))[0]),j=e[1],m=Object(i.useCallback)((function(e,t){return Math.abs(e-t)<=n}),[n]),x=Object(i.useCallback)((function(e,t,n){var a=d.width,c=d.height;return"top"===e?Math.round(t.dragShift-(c-n.height)/2):Math.round(t.dragShift-(a-n.width)/2)}),[d]),O=Object(i.useCallback)((function(e){var t=Object(a.a)({},p);l?e.includes("yr")?t.yr=!0:e.includes("yc")?t.yc=!0:e.includes("yl")&&(t.yl=!0):e.includes("yl")?t.yl=!0:e.includes("yc")?t.yc=!0:e.includes("yr")&&(t.yr=!0),r?e.includes("xb")?t.xb=!0:e.includes("xc")?t.xc=!0:e.includes("xt")&&(t.xt=!0):e.includes("xt")?t.xt=!0:e.includes("xc")?t.xc=!0:e.includes("xb")&&(t.xb=!0),j(t)}),[r,l,p]),v=Object(i.useCallback)((function(){j(w)}),[]),C=Object(i.useCallback)((function(){var e=y(d),t=Math.round(e.width/2),n=Math.round(e.height/2);v(),u.forEach((function(a,c){var o,i,r,l,u,h,p,j;s!==c&&(i=(o=y(a)).top,r=o.left,l=o.bottom,u=o.right,c=Math.round(o.width/2),a=Math.round(o.height/2),h={top:[{isNearly:m(e.top,i),lineNode:f.current.xt,line:"xt",dragShift:i,lineShift:i},{isNearly:m(e.bottom,i),lineNode:f.current.xt,line:"xt",dragShift:i-e.height,lineShift:i},{isNearly:m(e.top+n,i+a),lineNode:f.current.xc,line:"xc",dragShift:i+a-n,lineShift:i+a},{isNearly:m(e.top,l),lineNode:f.current.xb,line:"xb",dragShift:l,lineShift:l},{isNearly:m(e.bottom,l),lineNode:f.current.xb,line:"xb",dragShift:l-e.height,lineShift:l}],left:[{isNearly:m(e.left,r),lineNode:f.current.yl,line:"yl",dragShift:r,lineShift:r},{isNearly:m(e.right,r),lineNode:f.current.yl,line:"yl",dragShift:r-e.width,lineShift:r},{isNearly:m(e.left+t,r+c),lineNode:f.current.yc,line:"yc",dragShift:r+c-t,lineShift:r+c},{isNearly:m(e.left,u),lineNode:f.current.yr,line:"yr",dragShift:u,lineShift:u},{isNearly:m(e.right,u),lineNode:f.current.yr,line:"yr",dragShift:u-e.width,lineShift:u}]},p=[],j=o.rotate,Object.keys(h).forEach((function(t){h[t].forEach((function(n){var a;n.isNearly&&(a=0!==j?x(t,n,e):n.dragShift,b&&b(t,a,d),n.lineNode.style[t]="".concat(n.lineShift,"px"),p.push(n.line))}))})),p.length&&O(p))}))}),[d,v,u,s,m,x,b,O]);return Object(i.useEffect)((function(){(c?C:v)()}),[v,c,C]),Object(h.jsx)("div",{className:"drag-mark-line ",children:g.map((function(e){return Object(h.jsx)("div",{className:"line ".concat(e.includes("x")?"x-line":"y-line"),ref:function(t){f.current[e]=t},style:{display:p[e]?"block":"none"}},e)}))})})),M=n(261),S=n(332),k=n(120),N=n(226),I={version:"0.1.0",classify:[],name:"stage",showName:"\u821e\u53f0",uiSchema:{backgroundColor:{name:"\u80cc\u666f\u8272",type:"color",defaultValue:"#c7c7c7"}}},P=Object(i.lazy)((function(){return Promise.resolve().then(n.bind(null,226))})),V={mode:"show",componentsMeta:{},componentsInstance:[]};function E(){var e=(x=L()).activeComponent,t=x.activeComponentIndex,n=x.contextMenuState,a=x.hideContextMenu,c=n.show,o=n.top,r=n.left,l=Object(i.useCallback)((function(){a()}),[]),u=Object(i.useCallback)((function(){}),[]),s=Object(i.useCallback)((function(){}),[]),d=Object(i.useCallback)((function(){}),[]),b=Object(i.useCallback)((function(){}),[]),f=Object(i.useCallback)((function(){}),[]),p=Object(i.useCallback)((function(){}),[]),j=Object(i.useCallback)((function(){}),[]),m=Object(i.useCallback)((function(){}),[]),x=Object(i.useCallback)((function(){}),[]);n=Object(i.useCallback)((function(){}),[]);return c?Object(h.jsx)("div",{className:"context-menu",style:{top:o,left:r},children:Object(h.jsx)("ul",{onMouseUp:l,children:0!==t?Object(h.jsx)(h.Fragment,{children:e&&!e.isLock?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("li",{onClick:u,className:"disabled",children:"\u590d\u5236"}),Object(h.jsx)("li",{onClick:s,className:"disabled",children:"\u7c98\u8d34"}),Object(h.jsx)("li",{onClick:d,className:"disabled",children:"\u526a\u5207"}),Object(h.jsx)("li",{onClick:b,children:"\u5220\u9664"}),Object(h.jsx)("li",{onClick:f,className:"disabled",children:"\u9501\u5b9a"}),Object(h.jsx)("li",{onClick:p,children:"\u7f6e\u9876"}),Object(h.jsx)("li",{onClick:j,children:"\u7f6e\u5e95"}),Object(h.jsx)("li",{onClick:m,children:"\u4e0a\u79fb"}),Object(h.jsx)("li",{onClick:x,children:"\u4e0b\u79fb"})]}):Object(h.jsx)("li",{onClick:n,className:"disabled",children:"\u89e3\u9501"})}):Object(h.jsx)("li",{onClick:s,className:"disabled",children:"\u7c98\u8d34"})})}):null}function D(e){var t=void 0===(N=e.className)?"":N,n=(I=L()).componentsInstance,r=I.componentsMeta,l=I.activeComponentIndex,u=I.updateComponent,s=I.setActiveComponentIndex,d=I.showContextMenu,b=I.hideContextMenu,f=I.scale,p=Object(i.useState)({}),j=(P=Object(o.a)(p,2))[0],x=P[1],O=Object(i.useState)(),v=(e=Object(o.a)(O,2))[0],y=e[1],g=Object(i.useRef)(v),w=Object(i.useRef)(),M=Object(i.useCallback)((function(e){s(e)}),[s]),S=Object(i.useCallback)((function(e,t){u(t,{box:e}),y(void 0),g.current=void 0,x({curComponentStyle:e,isDownward:!1,isRightward:!1,isShow:!1})}),[u]),k=Object(i.useCallback)((function(e,t,n,a,c){w.current=e,"shape"===n&&x({curComponentStyle:t,isDownward:a,isRightward:c,isShow:!0})}),[]),N=Object(i.useCallback)((function(e){e.stopPropagation(),e.preventDefault();for(var t=e.target,n=e.nativeEvent.offsetY,a=e.nativeEvent.offsetX;t instanceof SVGElement;)t=t.parentNode;for(;!t.className.includes("editor-wrap");)a+=t.offsetLeft,n+=t.offsetTop,t=t.parentNode;d(n*f,a*f)}),[d,f]),I=Object(i.useCallback)((function(e){s(e)}),[]),P=(p=Object(i.useCallback)((function(e,t,n){void 0!==w.current&&(g.current&&g.current.curComponentStyle[e]===t||(t=Object(c.a)({},e,t),t={curComponentStyle:Object(a.a)(Object(a.a)({},n),t),id:w.current},g.current=t,y(t)))}),[]),Object(i.useMemo)((function(){return n.map((function(e){return e.box}))}),[n]));O=r.stage.component,e=Object(i.useMemo)((function(){return n[0]}),[n]);return Object(h.jsx)("div",{className:t,children:Object(h.jsxs)("div",{className:"editor-wrap",children:[Object(h.jsxs)(O,Object(a.a)(Object(a.a)({onContextMenu:N,id:"canvas-editor",onMouseDown:I.bind(null,0),onClick:function(){b()},scale:f,width:e.box.width,height:e.box.height},e.props),{},{children:[n.map((function(e,t){var c=e.type,o=e.props,u=e.box,s=e.id,d=e.dataSource,p=r[c];return p?(e=p.component,p=void 0===(p=p.suspenseFallback)?null:p,"stage"===c?null:(c=void 0!==l?n[l].id:"",Object(h.jsx)(m,{scale:{x:f,y:f},container:"#canvas-editor",isActive:s===c,shapeStyle:v&&s===v.id?v.curComponentStyle:u,onDragStart:function(){M(t)},onDrag:function(e,t,n,a){k(s,e,t,n,a)},onDragEnd:function(e){S(e,s)},onCLick:function(){b()},children:Object(h.jsx)(i.Suspense,{fallback:p,children:Object(h.jsx)("div",{style:{pointerEvents:"none",width:"100%",height:"100%",userSelect:"none"},children:Object(h.jsx)(e,Object(a.a)(Object(a.a)({},o),{},{width:u.width,height:u.height,data:null==d?void 0:d.staticData}))})})},s))):null})),Object(h.jsx)(C,{diff:8,getShapeOffset:p,activeComponentIndex:l,allComponentStyleList:P,curComponentStyle:j.curComponentStyle,isDownward:j.isDownward,isRightward:j.isRightward,isShow:j.isShow})]})),Object(h.jsx)(E,{})]})})}function z(){var e=(c=L()).componentsInstance,t=c.componentsMeta,n=Object(i.useMemo)((function(){return e[0]}),[e]),c=t.stage.component;return Object(h.jsx)(c,Object(a.a)(Object(a.a)({id:"canvas-editor",width:n.box.width,height:n.box.height},n.props),{},{children:e.map((function(e){var n=e.type,c=e.props,o=e.box,r=e.id,l=e.dataSource,u=t[n];return u?(e=u.component,u=void 0===(u=u.suspenseFallback)?null:u,"stage"===n?null:Object(h.jsx)(i.Suspense,{fallback:u,children:Object(h.jsx)("div",{style:{position:"absolute",top:o.top,left:o.left,width:o.width,height:o.height,zIndex:o.zIndex,transform:"rotate(".concat(o.rotate,"deg)")},children:Object(h.jsx)(e,Object(a.a)(Object(a.a)({},c),{},{width:o.width,height:o.height,data:null==l?void 0:l.staticData}))})},"".concat(r))):null}))}))}var L=(W=Object(S.a)((function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:V,t=Object(i.useState)(e.mode||"show"),n=(f=Object(o.a)(t,2))[0],c=f[1],r=Object(i.useState)(1),l=(p=Object(o.a)(r,2))[0],u=p[1],s=Object(i.useState)((0!==(v=e.componentsInstance||[]).length&&"stage"===v[0].type||v.unshift(N.defaultRootInstance),v)),d=(m=Object(o.a)(s,2))[0],h=m[1],b=Object(i.useState)(((x=e.componentsMeta||{}).stage||(x.stage=Object(a.a)(Object(a.a)({},I),{},{component:P})),x)),f=(t=Object(o.a)(b,2))[0],p=(r=t[1],Object(i.useState)(0)),j=(v=Object(o.a)(p,2))[0],m=(s=v[1],Object(i.useState)({top:0,left:0,show:!1})),x=(e=Object(o.a)(m,2))[0],O=e[1],v=(b=Object(i.useCallback)((function(e){e.id=Object(k.d)(),h((function(t){return[].concat(Object(M.a)(t),[e])}))}),[]),t=Object(i.useCallback)((function(e,t){h((function(n){var c=n.findIndex((function(t){return t.id===e}));return-1===c?n:(n[c]=Object(a.a)(Object(a.a)({},n[c]),t),Object(M.a)(n))}))}),[]),p=Object(i.useCallback)((function(e){u(2<e?2:e<.2?.2:e)}),[]),Object(i.useMemo)((function(){return void 0!==j?d[j]:void 0}),[j,d]));m=Object(i.useCallback)((function(e,t){O({show:!0,left:t,top:e})}),[]),e=Object(i.useCallback)((function(){O((function(e){return Object(a.a)(Object(a.a)({},e),{},{show:!1})}))}),[]);return{mode:n,setMode:c,componentsInstance:d,updateComponent:t,addComponent:b,componentsMeta:f,setComponentsMeta:r,activeComponentIndex:j,setActiveComponentIndex:s,contextMenuState:x,hideContextMenu:e,showContextMenu:m,activeComponent:v,scale:l,updateScale:p}}))).useContainer,R=W,F=(n(227),n(228),function(e){return e=void 0===(e=e.className)?"":e,"edit"===L().mode?Object(h.jsx)(D,{className:e}):Object(h.jsx)(z,{})}),_=(n(333),n(351)),A=n.n(_),X=n(158),Y=n(82),q=(t=(n(175),n(176)),n.n(t));n(337);S=n(338);var B=n.n(S);function J(e){if("object"!=typeof e)return"";try{return JSON.stringify(e,null,"\t")}catch(e){return""}}function T(e){var t=Object(i.useState)(J(e.value)),n=(r=Object(o.a)(t,2))[0],a=r[1],c=Object(i.useState)(!1),r=(t=Object(o.a)(c,2))[0],l=t[1],u=Object(i.useRef)();c=Object(i.useCallback)((function(t,n){var a;null!==(a=e.onChange)&&void 0!==a&&a.call(e,JSON.parse(n))}),[e]),t=Object(i.useCallback)((function(){var t,n=u.current();null!==(t=e.onSave)&&void 0!==t&&t.call(e,JSON.parse(n))}),[e]);return Object(i.useEffect)((function(){a(J(e.value))}),[e]),Object(h.jsxs)(Q,{children:[Object(h.jsx)(H.a,{height:e.height||500,width:e.width||"100%",language:"json",theme:"vs-dark",value:n,onChange:c,onMount:function(e){l(!0),u.current=e}}),e.onSave&&Object(h.jsx)($.a,{className:"btn-save",type:"primary",onClick:t,disabled:!r,children:"\u66f4\u65b0"})]})}n(126);var W=n(132),G=n.n(W),U=(_=function(e){var t=void 0===(t=e.value)?"":t,n=e.onChange;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{value:t,type:"color",onChange:function(e){return n(e.target.value)}}),Object(h.jsx)(G.a,{value:t,type:"text",onChange:function(e){return n(e.target.value)}})]})},t=(n(339),n(340)),n.n(t)),K=Object(Y.a)(U.a).withConfig({displayName:"group__CollapseReset",componentId:"sc-157rqbb-0"})([".site-collapse-custom-panel{margin-bottom:10px;overflow:hidden;border:0px;border-radius:2px;}"]),$=(S=function(e){var t=e.name,n=void 0!==(n=e.isOpen)&&n;e=e.children;return Object(h.jsx)(K,{bordered:!1,defaultActiveKey:n?"1":void 0,children:Object(h.jsx)(U.a.Panel,{header:t,className:"site-collapse-custom-panel",children:e},"1")})},W=(n(109),n(103)),n.n(W)),H=n(411),Q=Y.a.div.withConfig({displayName:"json-input__Wrap",componentId:"sc-1w8j8xf-0"})([".btn-save{margin:20px 0 0;}"]),Z=(t=(n(341),n(342)),n.n(t)),ee=(W=function(e){return Object(h.jsx)(Z.a,Object(a.a)(Object(a.a)({},e),{},{children:e.options.map((function(e){return Object(h.jsx)(Z.a.Option,{value:e.value,children:e.label},e.value)}))}))},t=(n(344),n(345)),n.n(t));n(346);t=n(347);var te=n.n(t);function ne(e){var t=e.config,n=e.name,c=t.name,o=t.type,i=t.props;e=re[o];if("hidden"===o)return null;if("group"!==o)return o=["boolean","switch"].includes(o)?"checked":"value",Object(h.jsx)(ie.a.Item,{name:n,label:c,labelAlign:"left",valuePropName:o,children:Object(h.jsx)(e,Object(a.a)({},i))});var r=t.children,l=t.baseParam;return Object(h.jsx)(e,Object(a.a)(Object(a.a)({name:c},i),{},{children:Object.keys(r).map((function(e){var t=(l?"".concat(l,"."):"")+e;return Object(h.jsx)(ne,{name:t,config:r[e]},t)}))}))}function ae(e){var t=e.value,n=e.config,c=e.successCB,r=(e=ie.a.useForm(),Object(o.a)(e,1)[0]);return Object(i.useEffect)((function(){r.resetFields()}),[r,t]),e=Object(i.useCallback)((function(e){c(e)}),[c]),Object(h.jsxs)(ie.a,Object(a.a)(Object(a.a)({onFinish:e,initialValues:t},le),{},{form:r,children:[Object.keys(n).map((function(e){return Object(h.jsx)(ne,{name:e,config:n[e]},e)})),Object(h.jsx)(ie.a.Item,{children:Object(h.jsx)($.a,{type:"primary",htmlType:"submit",children:"\u66f4\u65b0"})})]}))}function ce(){var e=(u=L()).activeComponent,t=u.componentsMeta,n=u.updateComponent,c=(l=e||{}).box,o=l.props,r=l.type,l=(u=Object(i.useMemo)((function(){var e=Object(a.a)(Object(a.a)({},ue),r?t[r].uiSchema:{}),n=Object(k.b)(e),i=Object(k.a)(o);return{config:e,defaultValue:Object(a.a)(Object(a.a)(Object(a.a)({},n),i),c)}}),[c,t,o,r])).config,u=u.defaultValue;return Object(h.jsx)(se,{children:Object(h.jsx)(ae,{value:u,config:l,successCB:function(t){var i=t.width,r=t.height,l=t.top,u=t.left,s=t.rotate,d=t.zIndex;t=Object(X.a)(t,["width","height","top","left","rotate","zIndex"]);e&&n(e.id,{box:Object(a.a)(Object(a.a)({},c),{},{width:i,height:r,top:l,left:u,rotate:s,zIndex:d}),props:Object(a.a)(Object(a.a)({},o),Object(k.c)(t))})}})})}n(197);t=n(211);var oe,ie=n.n(t),re=(t=(n(349),n(350)),t=n.n(t),{text:G.a,boolean:function(e){return Object(h.jsx)(q.a,Object(a.a)({},e))},number:t.a,color:_,select:W,json:T,buttonRadio:function(e){return Object(h.jsx)(B.a.Group,Object(a.a)(Object(a.a)({},e),{},{children:null===(e=e.options)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(B.a,{value:e.value,children:e.label},e.value)}))}))},slider:function(e){var t=e.suffix,n=e.prefix;return Object(h.jsxs)(h.Fragment,{children:[!!t&&Object(h.jsx)("label",{children:t}),Object(h.jsx)(ee.a,Object(a.a)({},e)),!!n&&Object(h.jsx)("label",{children:n})]})},group:S,switch:function(e){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(te.a,Object(a.a)({},e))})},checkbox:function(e){return Object(h.jsx)(q.a.Group,Object(a.a)(Object(a.a)({},e),{},{children:null===(e=e.options)||void 0===e?void 0:e.map((function(e){return Object(h.jsx)(q.a,{value:e.value,children:e.label},e.value)}))}))}}),le={labelCol:{span:7},wrapperCol:{span:19}},ue={box:{name:"\u5c3a\u5bf8",type:"group",props:{isOpen:!0},children:{width:{name:"\u5bbd\u5ea6",type:"number",defaultValue:300},height:{name:"\u9ad8\u5ea6",type:"number",defaultValue:200},top:{name:"Y\u8f74\u504f\u79fb",type:"number",defaultValue:200},left:{name:"X\u8f74\u504f\u79fb",type:"number",defaultValue:200},rotate:{name:"\u65cb\u8f6c",type:"number",defaultValue:0},opacity:{name:"\u900f\u660e\u5ea6",type:"slider",defaultValue:1,props:{min:0,max:1,step:.1}}}}},se=Y.a.div.withConfig({displayName:"ui-schema-panel__Wrap",componentId:"sc-10hhlgj-0"})(["font-size:20px;height:100%;"]),de=Y.a.div.withConfig({displayName:"data-schema-panel__Wrap",componentId:"sc-11cyz97-0"})(["font-size:20px;height:100%;"]),he={url:{name:"URL",type:"text",defaultValue:""},staticData:{name:"\u9759\u6001\u6570\u636e",type:"json",defaultValue:{}},updateInterval:{name:"\u66f4\u65b0\u95f4\u9694",type:"number",defaultValue:1}},be={};for(oe in he)be[oe]=he[oe].defaultValue;function fe(){var e=(n=L()).activeComponent,t=n.updateComponent,n=Object(i.useCallback)((function(n){e&&t(e.id,{dataSource:Object(a.a)(Object(a.a)({},e.dataSource),n)})}),[e,t]);return Object(h.jsx)(de,{children:Object(h.jsx)(ae,{value:(null==e?void 0:e.dataSource)||be,config:he,successCB:n})})}function pe(){var e=L(),t=e.updateComponent,n=e.activeComponent;return Object(h.jsx)(T,{value:n||{},onSave:function(e){return n&&t(n.id,e)}})}function je(){var e=L().activeComponent;return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("span",{className:"name",children:(null==e?void 0:e.name)||"--"}),Object(h.jsx)("span",{className:"version",children:null!=e&&e.version?"v".concat(null==e?void 0:e.version):"--"})]})}var me=A.a.TabPane,xe=Y.a.div.withConfig({displayName:"configuration-panel__Wrap",componentId:"sc-1jfs82z-0"})(["min-width:340px;height:100%;padding:10px;background:#25282e;color:#fff;.header{.name{margin-right:10px;font-size:12px;}.version{color:#7d7c7c;}}"]),Oe=function(e){var t=void 0===(t=e.className)?"":t;e=e.style;return 0===L().componentsInstance.length?Object(h.jsx)(xe,{className:t,style:e}):Object(h.jsx)(xe,{className:t,style:e,children:Object(h.jsxs)(A.a,{defaultActiveKey:"1",type:"card",children:[Object(h.jsxs)(me,{tab:"\u914d\u7f6e",children:[Object(h.jsx)(je,{}),Object(h.jsx)(ce,{})]},"1"),Object(h.jsxs)(me,{tab:"\u6570\u636e",children:[Object(h.jsx)(je,{}),Object(h.jsx)(fe,{})]},"2"),Object(h.jsxs)(me,{tab:"code",children:[Object(h.jsx)(je,{}),Object(h.jsx)(pe,{})]},"3")]})})},ve=function(e){var t=void 0===(a=e.mode)?"show":a,n=e.componentsMeta,a=e.componentsInstance;e=e.children;return Object(h.jsx)(R.Provider,{initialState:{mode:t,componentsMeta:n,componentsInstance:a},children:e})}},120:function(e,t,n){"use strict";function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12;return Number(Math.random().toString().substr(3,e)+Date.now()).toString(36)}n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var c=function e(t){var n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",c={};for(n in t){var o,i=t[n];"group"===i.type?e(i.children,(o=i.baseParam)?"".concat(o):""):c[a+n]=i.defaultValue}return c};function o(e){if(Object(e)!==e||Array.isArray(e))return e;var t,n=/\.?([^.\[\]]+)|\[(\d+)\]/g,a={};for(t in e){for(var c,o=a,i="";c=n.exec(t);)o=o[i]||(o[i]=c[2]?[]:{}),i=c[2]||c[1];o[i]=e[t]}return a[""]||a}function i(e){var t={};return function e(n,a){if(Object(n)!==n)t[a]=n;else if(Array.isArray(n)){for(var c=n.length,o=0;o<c;o++)e(n[o],"".concat(a,"[").concat(o,"]"));0===c&&(t[a]=[])}else{var i,r=!0;for(i in n)r=!1,e(n[i],a?"".concat(a,".").concat(i):i);r&&a&&(t[a]={})}}(e,""),t}},135:function(e,t,n){"use strict";t.a={version:"0.1.0",classify:["interactive"],name:"iframe",showName:"iframe\u7a97\u53e3",uiSchema:{src:{name:"\u94fe\u63a5",type:"text",defaultValue:""},title:{name:"\u540d\u79f0",type:"text",defaultValue:""},closable:{name:"\u662f\u5426\u53ef\u5173\u95ed",type:"boolean",defaultValue:!1}}}},136:function(e,t,n){"use strict";t.a={version:"0.1.0",classify:["text"],name:"tag",showName:"\u6807\u7b7e",uiSchema:{text:{name:"\u6587\u672c",type:"text",defaultValue:"\u6211\u662f\u4e00\u4e2a\u6807\u7b7e"},color:{name:"\u989c\u8272",type:"color",defaultValue:"#ff0000"}}}},137:function(e,t,n){"use strict";t.a={version:"0.1.0",classify:["media"],name:"image",showName:"\u56fe\u7247",uiSchema:{imgRepeatType:{name:"\u56fe\u7247\u91cd\u590d",type:"select",defaultValue:"\u4e0d\u91cd\u590d\u62c9\u4f38\u6ee1",props:{options:[{value:"\u4e0d\u91cd\u590d\u62c9\u4f38\u6ee1",label:"\u4e0d\u91cd\u590d\u62c9\u4f38\u6ee1"},{value:"\u6c34\u5e73\u548c\u5782\u76f4\u91cd\u590d",label:"\u6c34\u5e73\u548c\u5782\u76f4\u91cd\u590d"},{value:"\u6c34\u5e73\u91cd\u590d",label:"\u6c34\u5e73\u91cd\u590d"},{value:"\u5782\u76f4\u91cd\u590d",label:"\u5782\u76f4\u91cd\u590d"}]}},url:{name:"\u56fe\u7247\u94fe\u63a5",type:"text",defaultValue:"https://sf6-ttcdn-tos.pstatp.com/img/user-avatar/0189ed0e459221e36d1fe35ef018ea39~300x300.images"},target:{name:"\u662f\u5426\u65b0\u5f00\u7a97\u53e3",type:"switch",defaultValue:!1,props:{checkedChildren:"\u5f00",unCheckedChildren:"\u5173"}}}}},138:function(e,t,n){"use strict";t.a={version:"0.1.0",name:"pie-chart",showName:"\u997c\u56fe",classify:["pie-chart"],uiSchema:{title:{name:"\u6807\u9898",type:"group",baseParam:"title",children:{visible:{name:"\u662f\u5426\u5c55\u793a",type:"boolean",defaultValue:!0},text:{name:"\u6587\u672c",type:"text",defaultValue:"\u591a\u8272\u997c\u56fe"}}},description:{name:"\u63cf\u8ff0",type:"group",baseParam:"description",children:{visible:{name:"\u662f\u5426\u5c55\u793a",type:"boolean",defaultValue:!0},text:{name:"\u6587\u672c",type:"text",defaultValue:"\u6307\u5b9a\u989c\u8272\u6620\u5c04\u5b57\u6bb5(colorField)\uff0c\u997c\u56fe\u5207\u7247\u5c06\u6839\u636e\u8be5\u5b57\u6bb5\u6570\u636e\u663e\u793a\u4e3a\u4e0d\u540c\u7684\u989c\u8272\u3002\u6307\u5b9a\u989c\u8272\u9700\u8981\u5c06color\u914d\u7f6e\u4e3a\u4e00\u4e2a\u6570\u7ec4\u3002\n\u5f53\u628a\u997c\u56felabel\u7684\u7c7b\u578b\u8bbe\u7f6e\u4e3ainner\u65f6\uff0c\u6807\u7b7e\u4f1a\u663e\u793a\u5728\u5207\u7247\u5185\u90e8\u3002\u8bbe\u7f6eoffset\u63a7\u5236\u6807\u7b7e\u7684\u504f\u79fb\u503c\u3002"}}},radius:{name:"\u534a\u5f84",type:"number",defaultValue:.8},angleField:{name:"\u6247\u5f62\u5207\u7247\u5b57\u6bb5",type:"text",defaultValue:"value"},colorField:{name:"\u6247\u5f62\u989c\u8272\u5b57\u6bb5",type:"text",defaultValue:"type"},label:{name:"\u6807\u7b7e\u6587\u672c",type:"group",baseParam:"label",children:{visible:{name:"\u662f\u5426\u5c55\u793a",type:"boolean",defaultValue:!0},type:{name:"\u6807\u7b7e\u6587\u672c\u7c7b\u578b",type:"select",props:{options:[{label:"\u6247\u5f62\u5207\u7247\u5185",value:"inner"},{label:"\u997c\u5916",value:"outer"},{label:"\u5706\u5f62\u6392\u5e03\u4e8e\u997c\u5916",value:"outer-center"},{label:"\u8718\u86db\u5e03\u5c40",value:"spider"}]},defaultValue:"inner"}}},forceFit:{name:"\u81ea\u9002\u5e94\u5bb9\u5668\u5bbd\u9ad8",type:"boolean",defaultValue:!0}},dataSchema:{staticData:[{type:"\u5206\u7c7b\u4e00",value:27},{type:"\u5206\u7c7b\u4e8c",value:25},{type:"\u5206\u7c7b\u4e09",value:18},{type:"\u5206\u7c7b\u56db",value:15},{type:"\u5206\u7c7b\u4e94",value:10},{type:"\u5176\u5b83",value:5}]}}},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return e=new RegExp("(^|&)".concat(e,"=([^&]*)(&|$)")),null!==(e=window.location.search.substr(1).match(e))?decodeURI(e[2]):void 0}},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t),n.d(t,"defaultRootInstance",(function(){return r}));var a=n(57),c=n(158),o=n(0),i=(o=n(82),n(2)),r={id:"stage",type:"stage",name:"\u821e\u53f0",version:"0.1.0",box:{width:1200,height:740,left:0,top:0,zIndex:1,rotate:0},props:{backgroundColor:"#c7c7c7"}},l=o.a.div.withConfig({displayName:"stage__Wrap",componentId:"sc-5dubfq-0"})(["position:relative;transform-origin:0 0;"]);t.default=function(e){var t=e.width,n=e.height,o=e.backgroundColor,r=void 0===(u=e.scale)?1:u,u=Object(c.a)(e,["width","height","backgroundColor","scale"]);return Object(i.jsx)(l,Object(a.a)(Object(a.a)({},u),{},{style:{width:t,height:n,backgroundColor:o,transform:"scale(".concat(r)},children:e.children}))}},227:function(e,t,n){},228:function(e,t,n){},231:function(e,t,n){"use strict";var a=n(57),c=n(0),o=n(135),i=n(136),r=n(137),l=n(138),u=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,450))})),s=Object(c.lazy)((function(){return n.e(8).then(n.bind(null,451))})),d=Object(c.lazy)((function(){return n.e(5).then(n.bind(null,452))}));c=Object(c.lazy)((function(){return Promise.all([n.e(9),n.e(6)]).then(n.bind(null,453))})),c={iframe:Object(a.a)(Object(a.a)({},o.a),{},{component:u}),tag:Object(a.a)(Object(a.a)({},i.a),{},{component:s}),image:Object(a.a)(Object(a.a)({},r.a),{},{component:d}),"pie-chart":Object(a.a)(Object(a.a)({},l.a),{},{component:c})};t.a=c},701:function(e,t,n){},740:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return l}));var a=n(0),c=n(113),o=n(231),i=n(177),r=(t=n(701),n(2));function l(){var e=Object(i.a)("id"),t=Object(a.useMemo)((function(){if(!e)return[];var t=localStorage.getItem(e);return t?JSON.parse(t):[]}),[e]);return Object(r.jsx)(c.c,{mode:"show",componentsMeta:o.a,componentsInstance:t,children:Object(r.jsx)(c.a,{})})}}}]);